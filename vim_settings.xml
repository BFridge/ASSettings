<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks />
    <filemarks>
      <file name="E:/Paopao/paopao_android/paopao_circle/src/main/java/com/iqiyi/paopao/starwall/utils/PPCircleUtils.java" timestamp="1506074004657">
        <mark key="[" line="122" column="88" />
        <mark key="]" line="123" column="97" />
        <mark key="^" line="123" column="97" />
        <mark key="." line="123" column="97" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/cardv3/action/PaoPaoCardAction.java" timestamp="1506693826627">
        <mark key="[" line="509" column="46" />
        <mark key="]" line="509" column="54" />
        <mark key="^" line="509" column="54" />
        <mark key="." line="509" column="54" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/res/layout/pp_crow_funding_profile_layout.xml" timestamp="1504700060655">
        <mark key="[" line="222" column="0" />
        <mark key="]" line="222" column="43" />
        <mark key="." line="222" column="0" />
      </file>
      <file name="E:/Paopao/qiyivideo/gradle/wrapper/gradle-wrapper.properties" timestamp="1505977733965">
        <mark key="[" line="5" column="68" />
        <mark key="]" line="5" column="69" />
        <mark key="." line="5" column="69" />
        <mark key="^" line="5" column="68" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/adapter/CommentsListPresenter.java" timestamp="1506595323440">
        <mark key="[" line="744" column="51" />
        <mark key="]" line="744" column="56" />
        <mark key="." line="744" column="56" />
        <mark key="^" line="744" column="56" />
      </file>
      <file name="E:/Paopao/qiyivideo/app/QYVideoClient/src/org/qiyi/video/homepage/viewgroup/ScrollLinearLayout.java" timestamp="1506579323131">
        <mark key="[" line="212" column="8" />
        <mark key="]" line="212" column="9" />
        <mark key="^" line="212" column="9" />
        <mark key="." line="212" column="9" />
      </file>
      <file name="E:/Paopao/qiyivideo/app/QYVideoClient/src/com/qiyi/video/pages/category/BottomCategoryNaviUIPage.java" timestamp="1506671957307" />
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/module/detail/IDetailAction.java" timestamp="1505740803005">
        <mark key="[" line="44" column="0" />
        <mark key="]" line="44" column="0" />
        <mark key="." line="44" column="0" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_common_library/extLibs/allclasses.jar!/org/qiyi/basecard/v3/page/IPage.class" timestamp="1506657913270" />
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/presenter/CommentBarPresenter.java" timestamp="1506348055532">
        <mark key="[" line="205" column="12" />
        <mark key="]" line="205" column="19" />
        <mark key="^" line="205" column="19" />
        <mark key="." line="205" column="19" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/audiorecord/ui/RecordAudioView.java" timestamp="1506346420186">
        <mark key="[" line="87" column="0" />
        <mark key="]" line="87" column="0" />
        <mark key="." line="87" column="0" />
        <mark key="^" line="84" column="52" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/callback/PPLevelJsBridge.java" timestamp="1505394062033">
        <mark key="[" line="27" column="0" />
        <mark key="]" line="27" column="0" />
        <mark key="." line="27" column="0" />
      </file>
      <file name="E:/Paopao/qiyivideo/biz/Player/QYPlayerCardView/src/com/iqiyi/qyplayercardview/portraitv3/presenter/CommentPresenter.java" timestamp="1506692021073" />
      <file name="E:/Paopao/qiyivideo/app/QYVideoClient/src/com/qiyi/video/pages/WebPage.java" timestamp="1506671319716" />
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/res/layout/pp_feed_comment_item.xml" timestamp="1506653005224">
        <mark key="[" line="275" column="43" />
        <mark key="]" line="275" column="44" />
        <mark key="." line="275" column="44" />
        <mark key="^" line="275" column="43" />
      </file>
      <file name="E:/Paopao/qiyivideo/app/QYVideoClient/src/com/qiyi/video/pages/CommonCardPage.java" timestamp="1506673040123" />
      <file name="E:/Paopao/paopao_android/paopao_common_library/extLibs/allclasses.jar!/org/qiyi/basecard/v3/page/BasePage.class" timestamp="1506669449673" />
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/utils/PPCommonJsonParser.java" timestamp="1506064544107">
        <mark key="[" line="570" column="40" />
        <mark key="]" line="570" column="41" />
        <mark key="." line="570" column="41" />
        <mark key="^" line="570" column="41" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/models/CommentRepository.java" timestamp="1506498823943">
        <mark key="[" line="243" column="0" />
        <mark key="]" line="243" column="0" />
        <mark key="." line="243" column="0" />
        <mark key="^" line="242" column="80" />
      </file>
      <file name="E:/Paopao/qiyivideo/app/QYVideoClient/src/org/qiyi/android/video/pagemgr/BaseMainUIPage.java" timestamp="1506672425806" />
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/frag/FeedDetailFragment.java" timestamp="1506674576865">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="124" column="40" />
        <mark key="]" line="124" column="39" />
        <mark key="." line="124" column="39" />
        <mark key="^" line="124" column="39" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/starwall/ui/activity/GeneralCircleActivity.java" timestamp="1506666852666" />
      <file name="E:/Paopao/paopao_android/paopao_feed/src/main/java/com/iqiyi/feed/entity/CommentEntity.java" timestamp="1506498452067">
        <mark key="[" line="285" column="5" />
        <mark key="]" line="287" column="40" />
        <mark key="^" line="287" column="40" />
        <mark key="." line="287" column="40" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/holder/CommentsConfiguration.java" timestamp="1505984162006">
        <mark key="[" line="64" column="7" />
        <mark key="]" line="64" column="7" />
        <mark key="." line="64" column="7" />
        <mark key="^" line="64" column="15" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/stat/performance/fps/FrameCounter.java" timestamp="1506673196857">
        <mark key="[" line="82" column="69" />
        <mark key="]" line="82" column="68" />
        <mark key="^" line="82" column="68" />
        <mark key="." line="82" column="68" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/utils/fanslevel/FansLevelUtils.java" timestamp="1505398671400">
        <mark key="[" line="55" column="0" />
        <mark key="]" line="55" column="97" />
        <mark key="." line="80" column="81" />
      </file>
      <file name="E:/Paopao/qiyivideo/component/QYContext/src/org/qiyi/context/utils/QyIdUtils.java" timestamp="1506683305971" />
      <file name="E:/Paopao/paopao_android/paopao_feed/src/main/java/com/iqiyi/feed/ui/interfaces/ICommentHost.java" timestamp="1505983963356">
        <mark key="[" line="62" column="0" />
        <mark key="]" line="62" column="0" />
        <mark key="^" line="61" column="10" />
        <mark key="." line="62" column="0" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/helper/FeedJumpHelper.java" timestamp="1505892652309">
        <mark key="[" line="89" column="0" />
        <mark key="]" line="89" column="0" />
        <mark key="." line="89" column="0" />
      </file>
      <file name="E:/Paopao/qiyivideo/build.gradle" timestamp="1505976967852">
        <mark key="[" line="9" column="9" />
        <mark key="]" line="12" column="0" />
        <mark key="." line="12" column="0" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/ui/view/QYImageGridViewNew.java" timestamp="1506673375135" />
      <file name="E:/Paopao/qiyivideo/settings.gradle" timestamp="1505702601975">
        <mark key="[" line="183" column="0" />
        <mark key="]" line="183" column="0" />
        <mark key="." line="183" column="0" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/stat/CardV3PingbackDelegate.java" timestamp="1505976224521">
        <mark key="[" line="14" column="0" />
        <mark key="]" line="14" column="0" />
        <mark key="." line="14" column="0" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/ui/view/ViewMoreLayout.java" timestamp="1506071889212">
        <mark key="[" line="88" column="23" />
        <mark key="]" line="88" column="26" />
        <mark key="." line="88" column="26" />
        <mark key="^" line="88" column="26" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/ui/helper/CommonFeedContentHelper.java" timestamp="1506073967027">
        <mark key="[" line="578" column="84" />
        <mark key="]" line="579" column="93" />
        <mark key="^" line="579" column="93" />
        <mark key="." line="579" column="93" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/helper/CommentsHelper.java" timestamp="1506564603975">
        <mark key="[" line="35" column="0" />
        <mark key="]" line="35" column="0" />
        <mark key="." line="35" column="0" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/detail/helper/CommonDetailHelper.java" timestamp="1505397070663">
        <mark key="[" line="11" column="0" />
        <mark key="]" line="11" column="0" />
        <mark key="." line="11" column="0" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_common_library/extLibs/allclasses.jar!/org/qiyi/video/page/v3/page/view/V3BasePage.class" timestamp="1506659888814" />
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/holder/CommentsLogicHolder.java" timestamp="1506592334865">
        <mark key="[" line="372" column="12" />
        <mark key="]" line="372" column="12" />
        <mark key="^" line="402" column="63" />
        <mark key="." line="372" column="12" />
      </file>
      <file name="/Dummy.txt" timestamp="1506696427809">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="26" column="0" />
        <mark key="." line="26" column="0" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/adapter/viewholder/CommentHolder.java" timestamp="1506498090698">
        <mark key="[" line="93" column="96" />
        <mark key="]" line="94" column="7" />
        <mark key="." line="94" column="7" />
        <mark key="^" line="94" column="7" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_feed/src/main/java/com/iqiyi/feed/ui/adapter/CommentsListPresenter.java" timestamp="1506696790687">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="963" column="47" />
        <mark key="." line="32" column="0" />
        <mark key="^" line="972" column="130" />
      </file>
      <file name="E:/Paopao/qiyivideo/component/Card/QYCardV3/src/org/qiyi/card/v3/block/blockmodel/Block125Model.java" timestamp="1505879169029">
        <mark key="[" line="52" column="0" />
        <mark key="]" line="52" column="0" />
        <mark key="." line="52" column="0" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_common_library/extLibs/allclasses.jar!/org/qiyi/basecard/v3/adapter/ICardAdapter.class" timestamp="1506695582134" />
      <file name="E:/Paopao/paopao_android/paopao_feed/src/main/java/com/iqiyi/feed/common/helper/CommentFeedHost.java" timestamp="1505983004908">
        <mark key="[" line="141" column="0" />
        <mark key="]" line="141" column="0" />
        <mark key="." line="141" column="0" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_common_library/src/main/java/com/iqiyi/paopao/lib/common/ui/view/NineGridImageView.java" timestamp="1506674282486" />
      <file name="E:/Paopao/qiyivideo/biz/Player/QYPlayerCardView/src/com/iqiyi/qyplayercardview/portraitv3/view/CommentPanel.java" timestamp="1506690919104" />
      <file name="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/stat/performance/fps/FrameCountMonitor.java" timestamp="1506049647777">
        <mark key="[" line="18" column="22" />
        <mark key="]" line="18" column="35" />
        <mark key="." line="18" column="35" />
        <mark key="^" line="18" column="35" />
      </file>
      <file name="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/frag/DownLoadViewPagerFragment.java" timestamp="1506679614557">
        <mark key="[" line="411" column="45" />
        <mark key="]" line="411" column="45" />
        <mark key="." line="411" column="45" />
        <mark key="^" line="413" column="7" />
      </file>
      <file name="/fragment.java" timestamp="1506673108279">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="12" />
        <mark key="^" line="0" column="11" />
        <mark key="." line="0" column="12" />
      </file>
      <file name="E:/android-architecture/BitmapOp/app/src/main/java/com/example/dongzesong/bitmapop/ExceptionUtils.java" timestamp="1504705030004">
        <mark key="[" line="4" column="0" />
        <mark key="]" line="4" column="0" />
        <mark key="." line="4" column="0" />
      </file>
    </filemarks>
    <jumps>
      <jump line="216" column="14" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/PPMultiNameView.java" />
      <jump line="184" column="16" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/PPMultiNameView.java" />
      <jump line="77" column="26" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/starwall/ui/adapter/viewholder/CommentHolder.java" />
      <jump line="233" column="0" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/PPMultiNameView.java" />
      <jump line="52" column="4" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/PPMultiNameView.java" />
      <jump line="1250" column="12" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/starwall/ui/activity/FeedDetailActivity.java" />
      <jump line="805" column="19" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/starwall/ui/activity/FeedDetailActivity.java" />
      <jump line="177" column="22" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/PPMultiNameView.java" />
      <jump line="234" column="28" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/PPMultiNameView.java" />
      <jump line="180" column="8" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/PPMultiNameView.java" />
      <jump line="169" column="10" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/PPMultiNameView.java" />
      <jump line="0" column="0" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/PPMultiNameView.java" />
      <jump line="19" column="0" filename="E:/Paopao/paopao_android/paopao_android/src/main/res/layout/pp_level_icon_layout.xml" />
      <jump line="172" column="10" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/PPMultiNameView.java" />
      <jump line="237" column="46" filename="E:/Paopao/paopao_android/paopao_android/src/main/res/layout/pp_qz_feed_header.xml" />
      <jump line="85" column="0" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/activity/base/PaoPaoBaseActivity.java" />
      <jump line="1915" column="4" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/starwall/ui/activity/FeedDetailActivity.java" />
      <jump line="46" column="59" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/view/resizelayout/ResizeLayout.java" />
      <jump line="23" column="0" filename="E:/Paopao/qiyivideo/QYVideoClient/build.gradle" />
      <jump line="150" column="41" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/im/http/helper/RosterHttpHelper.java" />
      <jump line="29" column="74" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/im/http/helper/RosterCardHttpHelper.java" />
      <jump line="38" column="0" filename="E:/Paopao/qiyivideo/settings.gradle" />
      <jump line="0" column="0" filename="E:/Paopao/qiyivideo/settings.gradle" />
      <jump line="3210" column="4" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/adapter/viewholder/ViewHolderCircleContent.java" />
      <jump line="0" column="0" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/ui/adapter/viewholder/ViewHolderCircleContent.java" />
      <jump line="152" column="0" filename="E:/Paopao/qiyivideo/app/QYVideoClient/build.gradle" />
      <jump line="0" column="0" filename="E:/Paopao/qiyivideo/app/QYVideoClient/build.gradle" />
      <jump line="246" column="8" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/presenter/DetailCommentsJumpPresenter.java" />
      <jump line="728" column="115" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/starwall/ui/frag/QZFansCircleHitRankFragment.java" />
      <jump line="189" column="15" filename="E:/Paopao/qiyivideo/component/Card/QYBaseCardV3/src/org/qiyi/basecard/v3/data/statistics/BlockStatistics.java" />
      <jump line="0" column="0" filename="E:/Paopao/qiyivideo/component/Card/QYBaseCardV3/src/org/qiyi/basecard/v3/data/statistics/BlockStatistics.java" />
      <jump line="259" column="11" filename="D:/Android/sdk/sources/android-24/android/transition/Transition.java" />
      <jump line="2446" column="0" filename="D:/Android/sdk/sources/android-24/android/transition/Transition.java" />
      <jump line="967" column="0" filename="E:/Paopao/qiyivideo/biz/CrashReporter/src/main/java/com/qiyi/crashreporter/core/CrashHandler.java" />
      <jump line="0" column="0" filename="E:/Paopao/qiyivideo/biz/CrashReporter/src/main/java/com/qiyi/crashreporter/core/CrashHandler.java" />
      <jump line="270" column="29" filename="E:/Paopao/qiyivideo/app/QYVideoClient/src/org/qiyi/video/homepage/viewgroup/ScrollLinearLayout.java" />
      <jump line="0" column="0" filename="E:/Paopao/qiyivideo/app/QYVideoClient/src/org/qiyi/video/homepage/viewgroup/ScrollLinearLayout.java" />
      <jump line="31" column="18" filename="E:/Paopao/qiyivideo/app/QYVideoClient/src/org/qiyi/video/homepage/viewgroup/ScrollLinearLayout.java" />
      <jump line="619" column="23" filename="E:/Paopao/qiyivideo/component/Card/QYBaseCardV3/src/org/qiyi/basecard/v3/viewmodel/block/AbsBlockModel.java" />
      <jump line="0" column="0" filename="E:/Paopao/qiyivideo/component/Card/QYBaseCardV3/src/org/qiyi/basecard/v3/viewmodel/block/AbsBlockModel.java" />
      <jump line="121" column="42" filename="E:/Paopao/qiyivideo/component/Card/QYCardV3/src/org/qiyi/card/v3/block/MainBlockManager.java" />
      <jump line="545" column="37" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/homepage/ui/adapter/PPSquareAdapter.java" />
      <jump line="561" column="0" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/homepage/ui/adapter/PPSquareAdapter.java" />
      <jump line="806" column="22" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/adapter/FeedDetailCommentsAdapter.java" />
      <jump line="1479" column="0" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/adapter/FeedDetailCommentsAdapter.java" />
      <jump line="50" column="26" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/starwall/data/PPCircleRepository.java" />
      <jump line="36" column="59" filename="E:/Paopao/qiyivideo/biz/QYPaopao/build.gradle" />
      <jump line="24" column="27" filename="E:/Paopao/paopao_android/paopao_common_library/src/main/java/com/iqiyi/paopao/lib/common/performance/fps/FrameCounter.java" />
      <jump line="53" column="12" filename="E:/Paopao/paopao_android/paopao_common_library/src/main/java/com/iqiyi/paopao/lib/common/performance/fps/FrameCounter.java" />
      <jump line="114" column="46" filename="E:/Paopao/paopao_android/paopao_common_library/src/main/java/com/iqiyi/paopao/datareact/FeatureLiveData.java" />
      <jump line="0" column="0" filename="E:/Paopao/paopao_android/paopao_common_library/src/main/java/com/iqiyi/paopao/datareact/FeatureLiveData.java" />
      <jump line="251" column="13" filename="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/utils/ui/BitmapUtil.java" />
      <jump line="83" column="0" filename="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/ui/view/ptr/CommonPtrRecyclerView.java" />
      <jump line="51" column="8" filename="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/ui/view/ptr/CommonPtrRecyclerView.java" />
      <jump line="0" column="0" filename="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/lib/common/ui/view/ptr/CommonPtrRecyclerView.java" />
      <jump line="174" column="32" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/cardv3/action/PaoPaoCardCustomAction.java" />
      <jump line="0" column="0" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/cardv3/action/PaoPaoCardCustomAction.java" />
      <jump line="155" column="30" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/starwall/module/CircleModule.java" />
      <jump line="162" column="49" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/common/cardv3/action/PaoPaoCardAction.java" />
      <jump line="176" column="53" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/homepage/module/HomeModule.java" />
      <jump line="66" column="4" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/homepage/module/HomeModule.java" />
      <jump line="96" column="12" filename="E:/Paopao/qiyivideo/app/QYVideoClient/debug/com/qiyi/video/stetho/StethoUtils.java" />
      <jump line="0" column="0" filename="E:/Paopao/qiyivideo/app/QYVideoClient/debug/com/qiyi/video/stetho/StethoUtils.java" />
      <jump line="76" column="52" filename="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/audiorecord/AudioRecordManager.java" />
      <jump line="93" column="12" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/homepage/cardv3/circle/CircleListFragment.java" />
      <jump line="343" column="4" filename="E:/Paopao/paopao_android/paopao_middle_common_library/src/main/java/com/iqiyi/paopao/h5/activity/CommonWebViewNewActivity.java" />
      <jump line="707" column="8" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/frag/FeedDetailFragment.java" />
      <jump line="0" column="0" filename="E:/Paopao/paopao_android/paopao_android/src/main/java/com/iqiyi/paopao/detail/ui/frag/FeedDetailFragment.java" />
    </jumps>
    <registers>
      <register name="&quot;" type="2">
        <text encoding="base64">cGFja2FnZSBjb20uaXFpeWkuZmVlZC51aS5hZGFwdGVyOwoKaW1wb3J0IGFuZHJvaWQuYXBwLkFjdGl2aXR5OwppbXBvcnQgYW5kcm9pZC5jb250ZW50LkNsaXBEYXRhOwppbXBvcnQgYW5kcm9pZC5jb250ZW50LkNsaXBib2FyZE1hbmFnZXI7CmltcG9ydCBhbmRyb2lkLmNvbnRlbnQuQ29udGV4dDsKaW1wb3J0IGFuZHJvaWQuY29udGVudC5JbnRlbnQ7CmltcG9ydCBhbmRyb2lkLnN1cHBvcnQudjcud2lkZ2V0LlJlY3ljbGVyVmlldzsKaW1wb3J0IGFuZHJvaWQudGV4dC5TcGFubmFibGVTdHJpbmc7CmltcG9ydCBhbmRyb2lkLnRleHQuU3Bhbm5lZDsKaW1wb3J0IGFuZHJvaWQudGV4dC5UZXh0VXRpbHM7CmltcG9ydCBhbmRyb2lkLnRleHQuc3R5bGUuRm9yZWdyb3VuZENvbG9yU3BhbjsKaW1wb3J0IGFuZHJvaWQudmlldy5MYXlvdXRJbmZsYXRlcjsKaW1wb3J0IGFuZHJvaWQudmlldy5WaWV3OwppbXBvcnQgYW5kcm9pZC52aWV3LlZpZXdHcm91cDsKaW1wb3J0IGFuZHJvaWQud2lkZ2V0LkFic0xpc3RWaWV3OwppbXBvcnQgYW5kcm9pZC53aWRnZXQuQWRhcHRlclZpZXc7CmltcG9ydCBhbmRyb2lkLndpZGdldC5JbWFnZVZpZXc7CmltcG9ydCBhbmRyb2lkLndpZGdldC5MaW5lYXJMYXlvdXQ7CmltcG9ydCBhbmRyb2lkLndpZGdldC5UZXh0VmlldzsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLmNvbW1vbi5oZWxwZXIuQ29tbWVudEZlZWRIb3N0OwppbXBvcnQgY29tLmlxaXlpLmZlZWQuZW50aXR5LkNvbW1lbnRFbnRpdHk7CmltcG9ydCBjb20uaXFpeWkuZmVlZC5odHRwLkRlbGV0ZUNvbW1lbnRSZXF1ZXN0OwppbXBvcnQgY29tLmlxaXlpLmZlZWQudWkuaW50ZXJmYWNlcy5JQ29tbWVudEhvc3Q7CmltcG9ydCBjb20uaXFpeWkuZmVlZC5SOwppbXBvcnQgY29tLmlxaXlpLmZlZWQuY29tbW9uLmNvbW11bmljYXRpb24uRmVlZENvbGxlY3Rpb25IZWxwZXI7CmltcG9ydCBjb20uaXFpeWkuZmVlZC5lbnRpdHkuQ2hhbmdlZERhdGFPZkNvbW1lbnRzOwppbXBvcnQgY29tLmlxaXlpLmZlZWQudWkuYWN0aXZpdHkuSG90Q29tbWVudHNBY3Rpdml0eTsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLnVpLmZyYWdtZW50LkZlZWREZXRhaWxGcmFnbWVudDsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLnVpLmhvbGRlci5Db21tZW50SG9sZGVyOwppbXBvcnQgY29tLmlxaXlpLmZlZWQudWkubW9kZWwuQ29tbWVudERhdGFTb3VyY2U7CmltcG9ydCBjb20uaXFpeWkuZmVlZC51aS5tb2RlbC5Db21tZW50UmVwb3NpdG9yeTsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uY29uc3RhbnRzLklGZWVkRGV0YWlsQ29tbWVudHNDb25zOwppbXBvcnQgY29tLmlxaXlpLmZlZWQudWkuaG9sZGVyLkNvbW1lbnRzQ29uZmlndXJhdGlvbjsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLmh0dHAuRGVsZXRlQ29tbWVudFJlcXVlc3Q7CmltcG9ydCBjb20uaXFpeWkuZmVlZC51aS5tb2RlbC5Db21tZW50c01vZGVsOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5jb25zdGFudHMuSVZpZXdIb2xkZXJDaXJjbGVDb25zdDsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uZmVlZGNvbGxlY3Rpb24uY29tbXVuaWNhdGlvbi5GZWVkSnVtcGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLlN0cmluZ1V0aWxzOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLmFwcC5QUENvbW1vbkFwcDsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi5jb25zdGFudHMuRGF0YUNvbnN0OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLmVudGl0eS5ldmVudGJ1cy5NYWluVGhyZWFkRXZlbnQ7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24uaHR0cC5BZ3JlZUNvbW1lbnRSZXF1ZXN0OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnN0YXQuUGluZ2JhY2s7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udWkuaGVscGVyLkNvbW1vbkZlZWRDb250ZW50SGVscGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnVpLmhlbHBlci5QUENvbW1vblJOSGVscGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnVpLnZpZXcuZGlhbG9nLkNvbmZpcm1EaWFsb2c7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udWkudmlldy5wdHIuQ29tbW9uUHRyUmVjeWNsZXJWaWV3OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLkNvbGxlY3Rpb25VdGlsczsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51dGlscy5GZWVkQ29tbW9uSGVscGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLlBQVG9vbHM7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmNvbnN0YW50cy5JbnRlbnRDb25zdDsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLmVudGl0eS5Db21tZW50RW50aXR5OwppbXBvcnQgY29tLmlxaXlpLmZlZWQuY29tbW9uLmhlbHBlci5Db21tZW50RmVlZEhvc3Q7CmltcG9ydCBjb20uaXFpeWkuZmVlZC5jb21tb24uaGVscGVyLkNvbW1lbnRzSGVscGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLmh0dHAuQWdyZWVDb21tZW50UmVxdWVzdDsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLnVpLmludGVyZmFjZXMuSUNvbW1lbnRDYWxsQmFjazsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLnVpLmludGVyZmFjZXMuSUNvbW1lbnRIb3N0OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnN0YXQuSVBpbmdiYWNrUGFnZTsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi5zdGF0LlBpbmdiYWNrOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnN0YXQuUGluZ2JhY2tQYXJhbTsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51aS5oZWxwZXIuQ29tbW9uRmVlZENvbnRlbnRIZWxwZXI7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udWkudmlldy5kaWFsb2cuQ29uZmlybURpYWxvZzsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51aS52aWV3LmRpYWxvZy5NZW51RGlhbG9nOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnVpLnZpZXcubG9hZGluZ3ZpZXcuTG9hZGluZ1Jlc3VsdFBhZ2U7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udWkudmlldy5wdHIuQ29tbW9uUHRyUmVjeWNsZXJWaWV3OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLkNvbGxlY3Rpb25VdGlsczsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51dGlscy5FdmVudEJ1c0NvbmZpZzsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51dGlscy5GZWVkQ29tbW9uSGVscGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLkxpbmtNb3ZlbWVudE1ldGhvZE92ZXJyaWRlOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLlBQTG9nOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLlBQVG9vbHM7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udXRpbHMuU2FtcGxlQ2xpY2thYmxlU3BhbjsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51dGlscy5WaWV3VXRpbHM7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udXRpbHMudG9hc3RzLlBhb1Bhb1RpcHM7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLnF5Y29tcG9uZW50LmVtb3Rpb24udXRpbHMuRW1vdGlvbkVkaXRVdGlsczsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uc3RhcndhbGwuZW50aXR5LkF1ZGlvRW50aXR5OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5zdGFyd2FsbC5lbnRpdHkuRmVlZERldGFpbEVudGl0eTsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uc3RhcndhbGwuZW50aXR5Lk1lZGlhRW50aXR5OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5zdGFyd2FsbC5lbnRpdHkuVXNlcklkZW50aXR5OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5zdGFyd2FsbC51dGlscy5TdGFyQ2lyY2xlVXRpbHM7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLnVzZXIuQ29tbW9uVXNlckluZm9VdGlsczsKCmltcG9ydCBvcmcuZ3JlZW5yb2JvdC5ldmVudGJ1cy5FdmVudEJ1czsKaW1wb3J0IG9yZy5xaXlpLmJhc2Vjb3JlLnV0aWxzLlVJVXRpbHM7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKCgovKioKICogZmVlZM/qx+nSs8/CtcTGwMLbwdCx7QogKiDV4rj2wOC1xNaw1PDKx8bAwtvB0LHtTGlzdFZpZXe1xM/Uyr4KICogZmVlZM/qx+nSs7XExNrI3bK71Nm6zdXiuPZMaXN0Vmlld/Huus8KICoKICogtMvA4LrNzeKyv7XE8e66z73PzqrRz9bYCiAqCiAqIENyZWF0ZWQgYnkgRnJpZGdlIG9uIDE2LzcvMjcuCiAqLwovL3RvZG86vMzQ+HZpZXey47rNcHJlc2VudGVysuO1xLfWwOsKcHVibGljIGNsYXNzIENvbW1lbnRzTGlzdFByZXNlbnRlciBpbXBsZW1lbnRzIElGZWVkRGV0YWlsQ29tbWVudHNDb25zewogICAgcHJpdmF0ZSBmaW5hbCBDb21tZW50c0FkYXB0ZXIgYWRhcHRlciA9IG5ldyBDb21tZW50c0FkYXB0ZXIoKTsKICAgIHByaXZhdGUgQ29tbWVudHNDb25maWd1cmF0aW9uIGNvbmZpZzsKICAgIHByaXZhdGUgUmVjeWNsZXJWaWV3LkFkYXB0ZXJEYXRhT2JzZXJ2ZXIgbU9ic2VydmVyPW5ldyBSZWN5Y2xlclZpZXcuQWRhcHRlckRhdGFPYnNlcnZlcigpIHsKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBvbkNoYW5nZWQoKSB7CiAgICAgICAgICAgIHN1cGVyLm9uQ2hhbmdlZCgpOwogICAgICAgICAgICBtTGlzdFZpZXcucG9zdChuZXcgUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICBzZXRFbXB0eVZpZXdWaXNpYmxlKCFtTW9kZWwuaGFzQ29tbWVudHMoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CgoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBUQUcgPSAiRmVlZENvbW1lbnREZXRhaWxBZGFwdGVyIjsKCiAgICBwcml2YXRlIGJvb2xlYW4gb25seUhvdCA9IGZhbHNlOwoKICAgIC8vQ29udGV4dAogICAgcHJpdmF0ZSBDb250ZXh0IG1Db250ZXh0OwoKCiAgICAvL8/gudi72LX3Y2FsbGJhY2sKICAgIHByaXZhdGUgSUNvbW1lbnRDYWxsQmFjayBjb21tZW50Q2FsbGJhY2s7CgoKICAgIHByaXZhdGUgQ29tbWVudEVudGl0eSBvcENvbW1lbnRFbnRpdHk7Ly8vLyCxu7LZ1/e1xMbAwtsKCiAgICBwcml2YXRlIENvbW1lbnRzTW9kZWwgbU1vZGVsID0gbmV3IENvbW1lbnRzTW9kZWwoKTsKICAgIC8vVUnP4LnYCiAgICBwcml2YXRlIENvbW1vblB0clJlY3ljbGVyVmlldyBtTGlzdFZpZXc7CiAgICBwcml2YXRlIExvYWRpbmdSZXN1bHRQYWdlIG5vQ29tbWVudHNWaWV3OyAvL8bAwtvOqr/VyrGjrMbAwtvH+M/Uyr61xNKzw+YKCiAgICBwcml2YXRlIGJvb2xlYW4gaXNMb2FkaW5nOwogICAgLy8gcGluZ2JhY2vP4LnYCiAgICBwcml2YXRlIGludCBtV2hpdGNoRnJvbVBhZ2U7CiAgICBwcml2YXRlIElQaW5nYmFja1BhZ2UgcnBhZ2U7CiAgICBwcml2YXRlIENvbW1lbnRSZXBvc2l0b3J5IGNvbW1lbnRSZXBvc2l0b3J5OwoKCiAgICBwdWJsaWMgYm9vbGVhbiBpc09ubHlIb3QoKSB7CiAgICAgICAgcmV0dXJuIGdldENvbmZpZygpLmlzT25seUhvdCgpOwogICAgfQoKICAgIHB1YmxpYyBDb21tZW50c0xpc3RQcmVzZW50ZXIoSUNvbW1lbnRIb3N0IGhvc3QsIENvbnRleHQgbUNvbnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbW1vblB0clJlY3ljbGVyVmlldyBtTGlzdFZpZXcsIElDb21tZW50Q2FsbEJhY2sgSUNvbW1lbnRDYWxsYmFjaywgTG9hZGluZ1Jlc3VsdFBhZ2Ugbm9Db21tZW50c1ZpZXcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElQaW5nYmFja1BhZ2UgcGluZ2JhY2tQYWdlLCBpbnQgd2hpdGNoRnJvbVBhZ2UsIENvbW1lbnRzQ29uZmlndXJhdGlvbiBjb25maWd1cmF0aW9uLCBDb21tZW50UmVwb3NpdG9yeSBjb21tZW50UmVwb3NpdG9yeSkgewogICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlndXJhdGlvbjsKICAgICAgICB0aGlzLm1Db250ZXh0ID0gbUNvbnRleHQ7CiAgICAgICAgdGhpcy5tTGlzdFZpZXcgPSBtTGlzdFZpZXc7CiAgICAgICAgdGhpcy5jb21tZW50Q2FsbGJhY2sgPSBJQ29tbWVudENhbGxiYWNrOwogICAgICAgIHRoaXMubm9Db21tZW50c1ZpZXcgPSBub0NvbW1lbnRzVmlldzsKICAgICAgICB0aGlzLnJwYWdlID0gcGluZ2JhY2tQYWdlOwogICAgICAgIHRoaXMubVdoaXRjaEZyb21QYWdlID0gd2hpdGNoRnJvbVBhZ2U7CiAgICAgICAgdGhpcy5jb21tZW50UmVwb3NpdG9yeSA9IGNvbW1lbnRSZXBvc2l0b3J5OwogICAgICAgIGluaXQobUxpc3RWaWV3KTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgaW5pdChDb21tb25QdHJSZWN5Y2xlclZpZXcgbUxpc3RWaWV3KSB7CiAgICAgICAgYWRhcHRlci5yZWdpc3RlckFkYXB0ZXJEYXRhT2JzZXJ2ZXIobU9ic2VydmVyKTsKICAgICAgICBtTGlzdFZpZXcuc2V0QWRhcHRlcihhZGFwdGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIMfrx/PGwMLbvdO/2rrNyb6z/cbAwtu907/auvO1xLLZ1/cKICAgICAqCiAgICAgKiBAcGFyYW0gaGFzTW9yZSDKx7fx09DPwtK70rMKICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIG9uTW9yZUxvYWRlZChib29sZWFuIGhhc01vcmUpIHsKICAgICAgICBpZiAoIWhhc01vcmUpIHsKICAgICAgICAgICAgaWYgKGFkYXB0ZXIuZ2V0SXRlbUNvdW50KCkgPT0gMCkgewogICAgICAgICAgICAgICAgbUxpc3RWaWV3LnN0b3AoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG1MaXN0Vmlldy5sb2FkTW9yZUNvbXBsZXRlKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1MaXN0Vmlldy5sb2FkTW9yZUNvbXBsZXRlKHRydWUpOwogICAgICAgIH0KICAgICAgICBpc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICBhZGFwdGVyLm5vdGlmeURhdGFTZXRDaGFuZ2VkKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHNldEVtcHR5Vmlld1Zpc2libGUoYm9vbGVhbiB2aXNpYmxlKSB7CiAgICAgICAgaWYgKHZpc2libGUpIHsKICAgICAgICAgICAgbUxpc3RWaWV3LnNldFB1bGxMb2FkRW5hYmxlKGZhbHNlKTsKICAgICAgICAgICAgaWYgKGdldENvbmZpZygpLmlzSW5kZXBlbmRlbnQoKSkgewogICAgICAgICAgICAgICAgbUxpc3RWaWV3LnNldFB1bGxSZWZyZXNoRW5hYmxlKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBub0NvbW1lbnRzVmlldy5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CgogICAgICAgICAgICAvLyDQocPXyta7+snPu+GxqENsYXNzQ2FzdEV4Y2VwdGlvbqOsy7XD97TLyrHDu7zTuf2jrMTHvs2yu9Do0qrJvgogICAgICAgICAgICAvLyC199PDuf1zZXRBZGFwdGVyu/LV32FkZEZvb3RlclZpZXe2vLK7u+GxqLjDtO3O8wovLyAgICAgICAgICAgIHRyeSB7Ci8vICAgICAgICAgICAgICAgIG1MaXN0Vmlldy5yZW1vdmVGb290ZXJWaWV3KG5vQ29tbWVudHNWaWV3KTsKLy8gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewovLwovLyAgICAgICAgICAgIH0KICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqINPJ09rOtNaqtcTUrdLyo6zU2m5vdGlmebXEyrG68siluPh2aWV3yejWw9DCTGF5b3V0UGFyYW1z0v3G8MHLscDAo6O6CiAgICAgICAgICAgICAqIGphdmEubGFuZy5OdWxsUG9pbnRlckV4Y2VwdGlvbjoKICAgICAgICAgICAgICogQXR0ZW1wdCB0byBpbnZva2UgdmlydHVhbCBtZXRob2QgJ2Jvb2xlYW4gYW5kcm9pZC5zdXBwb3J0LnY3LndpZGdldC5SZWN5Y2xlclZpZXckVmlld0hvbGRlci5zaG91bGRJZ25vcmUoKScgb24gYSBudWxsIG9iamVjdCByZWZlcmVuY2UKICAgICAgICAgICAgICogy/nS1NTa0tG+rdPQTGF5b3V0UGFyYW1ztcTKsbryo6zQ3rjEy/wKICAgICAgICAgICAgICovCiAgICAgICAgICAgIFJlY3ljbGVyVmlldy5MYXlvdXRQYXJhbXMgZm9vdFBhcmFtcyA9IG51bGw7CiAgICAgICAgICAgIGlmIChub0NvbW1lbnRzVmlldy5nZXRMYXlvdXRQYXJhbXMoKT09bnVsbCkgewogICAgICAgICAgICAgICAgIGZvb3RQYXJhbXMgPSBuZXcgUmVjeWNsZXJWaWV3LkxheW91dFBhcmFtcygKICAgICAgICAgICAgICAgICAgICAgICAgVmlld0dyb3VwLkxheW91dFBhcmFtcy5NQVRDSF9QQVJFTlQsCiAgICAgICAgICAgICAgICAgICAgICAgIGdldENvbmZpZygpLmlzSW5kZXBlbmRlbnQoKSA/IG1MaXN0Vmlldy5nZXRIZWlnaHQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogVmlld0dyb3VwLkxheW91dFBhcmFtcy5XUkFQX0NPTlRFTlQpOwogICAgICAgICAgICB9ZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBmb290UGFyYW1zID0gKFJlY3ljbGVyVmlldy5MYXlvdXRQYXJhbXMpIG5vQ29tbWVudHNWaWV3LmdldExheW91dFBhcmFtcygpOwogICAgICAgICAgICAgICAgZm9vdFBhcmFtcy5oZWlnaHQgPSBnZXRDb25maWcoKS5pc0luZGVwZW5kZW50KCkgPyBtTGlzdFZpZXcuZ2V0SGVpZ2h0KCkKICAgICAgICAgICAgICAgICAgICAgICAgOiBWaWV3R3JvdXAuTGF5b3V0UGFyYW1zLldSQVBfQ09OVEVOVDsKICAgICAgICAgICAgfQogICAgICAgICAgICBub0NvbW1lbnRzVmlldy5zZXRMYXlvdXRQYXJhbXMoZm9vdFBhcmFtcyk7CiAgICAgICAgICAgIG1MaXN0Vmlldy5hZGRGb290ZXJWaWV3KG5vQ29tbWVudHNWaWV3KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtTGlzdFZpZXcuc2V0UHVsbExvYWRFbmFibGUodHJ1ZSk7CiAgICAgICAgICAgIG1MaXN0Vmlldy5zZXRQdWxsUmVmcmVzaEVuYWJsZSh0cnVlKTsKICAgICAgICAgICAgbUxpc3RWaWV3LnJlbW92ZUZvb3RlclZpZXcobm9Db21tZW50c1ZpZXcpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBub3RpZnlEYXRhU2V0Q2hhbmdlZCgpewogICAgICAgIGFkYXB0ZXIubm90aWZ5RGF0YVNldENoYW5nZWQoKTsKICAgIH0KICAgIC8qKgogICAgICog1tjQwrzT1NjGwMLbCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlbG9hZENvbW1lbnRzKCkgewogICAgICAgIHJlbG9hZENvbW1lbnRzKG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICog1tjQwrzT1NjGwMLbCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlbG9hZENvbW1lbnRzKEZlZWREZXRhaWxGcmFnbWVudC5Db21tZW50c0RhdGFDaGFuZ2VkTGlzdGVuZXIgcmVsb2FkRmluaXNoTGlzdGVuZXIpIHsKICAgICAgICBsb2FkQ29tbWVudHMocmVsb2FkRmluaXNoTGlzdGVuZXIsIHRydWUpOy8vW3N0YXJ0IGZyb20gZmlyc3RdCiAgICB9CgogICAgLyoqCiAgICAgKiC809TYuPy24MbAwtsKICAgICAqLwogICAgcHVibGljIHZvaWQgbG9hZE1vcmUoKSB7CiAgICAgICAgbG9hZENvbW1lbnRzKG51bGwsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAqILvxyKHGwMLbwdCx7QogICAgICoKICAgICAqIEBwYXJhbSByZWxvYWRGaW5pc2hMaXN0ZW5lcgogICAgICogQHBhcmFtIHJlZnJlc2gKICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGxvYWRDb21tZW50cyhmaW5hbCBGZWVkRGV0YWlsRnJhZ21lbnQuQ29tbWVudHNEYXRhQ2hhbmdlZExpc3RlbmVyIHJlbG9hZEZpbmlzaExpc3RlbmVyLCBmaW5hbCBib29sZWFuIHJlZnJlc2gpIHsKCgogICAgICAgIGlzTG9hZGluZyA9IHRydWU7CiAgICAgICAgY29tbWVudFJlcG9zaXRvcnkubG9hZENvbW1lbnRzKG5ldyBDb21tZW50RGF0YVNvdXJjZS5Mb2FkQ29tbWVudHNDYWxsQmFjaygpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ29tbWVudHNMb2FkZWQoQ29tbWVudHNNb2RlbCBtb2RlbCkgewogICAgICAgICAgICAgICAgbU1vZGVsID0gbW9kZWw7CiAgICAgICAgICAgICAgICBpZiAocmVsb2FkRmluaXNoTGlzdGVuZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJlbG9hZEZpbmlzaExpc3RlbmVyLm9uU3VjY2Vzcyhtb2RlbCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy+x5Lj8wdCx7SwgZmVlZCyyos2o1qpVSbHku68KICAgICAgICAgICAgICAgIE1haW5UaHJlYWRFdmVudCBldmVudCA9IG5ldyBNYWluVGhyZWFkRXZlbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzQ29uZmlnLkZFRURfR0VUX0NPTU1ORVRfU1VDQ0VTUywgbnVsbCk7CiAgICAgICAgICAgICAgICBFdmVudEJ1cy5nZXREZWZhdWx0KCkucG9zdChldmVudCk7CiAgICAgICAgICAgICAgICBvbk1vcmVMb2FkZWQobW9kZWwuaXNIYXNNb3JlKCkpOwogICAgICAgICAgICAgICAgY29tbWVudENhbGxiYWNrLm9uUmVsb2FkU3VjY2VzcygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25EYXRhTm90QXZhaWxhYmxlKGJvb2xlYW4gaGFzTW9yZSkgewogICAgICAgICAgICAgICAgLy90b2RvINXiwO/Q6NKqsuLK1AogICAgICAgICAgICAgICAgaWYgKGFkYXB0ZXIuZ2V0SXRlbUNvdW50KCkgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIG9uTW9yZUxvYWRlZChoYXNNb3JlKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIG1MaXN0Vmlldy5sb2FkTW9yZUZhaWxlZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29tbWVudENhbGxiYWNrLm9uR2V0RXJyb3IoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIHJlZnJlc2gpOwogICAgfQoKICAgIHByaXZhdGUgTGlzdDxDb21tZW50RW50aXR5PiBnZXRDb21tZW50TGlzdCgpIHsKICAgICAgICByZXR1cm4gbU1vZGVsLmdldENvbW1lbnRzTGlzdCgpOwogICAgfQoKICAgIHB1YmxpYyBsb25nIGdldEhvdENvbW1lbnRUb3RhbENvdW50KCkgewogICAgICAgIHJldHVybiBtTW9kZWwuZ2V0VG90YWxIb3RDb21tZW50c0NvdW50KCk7CiAgICB9CgogICAgcHVibGljIGludCBnZXRIb3RDb21tZW50Q3VycmVudENvdW50KCkgewogICAgICAgIHJldHVybiBtTW9kZWwuZ2V0Q3VycmVudEhvdENvbW1lbnRDb3VudCgpOwogICAgfQoKCiAgICBwdWJsaWMgdm9pZCBzaG93Q29tbWVudE9wZXJhdGlvbkRsZyhmaW5hbCBDb21tZW50RW50aXR5IGNvbW1lbnRFbnRpdHkpIHsKCiAgICAgICAgb3BDb21tZW50RW50aXR5ID0gY29tbWVudEVudGl0eTsKCgogICAgICAgIEFycmF5TGlzdDxNZW51RGlhbG9nLk1lbnVJdGVtPiBvcHRpb25zUGFyYW1zID0gbmV3IEFycmF5TGlzdDw+KCk7CgogICAgICAgIC8vIMj0ysfX1Ly6t6KyvLXExsDC2ywg1PIgIr7ZsagiILmmxNyyu8K2s/YKICAgICAgICBpZiAoIWNvbW1lbnRFbnRpdHkuZ2V0SXNPd25lcigpKSB7CiAgICAgICAgICAgIE1lbnVEaWFsb2cuTWVudUl0ZW0gcmVwb3J0SXRlbSA9IG5ldyBNZW51RGlhbG9nLk1lbnVJdGVtKCk7CiAgICAgICAgICAgIHJlcG9ydEl0ZW0uc2V0VGl0bGUobUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnBwX2NpcmNsZV9mZWVkX2NvbW1lbnRfb3BfcmVwb3J0KSk7CiAgICAgICAgICAgIHJlcG9ydEl0ZW0uc2V0T25DbGlja0xpc3RlbmVyKAogICAgICAgICAgICAgICAgICAgIG5ldyBWaWV3Lk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soVmlldyB2aWV3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnRlbnQgaSA9IG5ldyBJbnRlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkucHV0RXh0cmEoSW50ZW50Q29uc3QuVVNFUl9JRF9LRVksIG9wQ29tbWVudEVudGl0eS5nZXRVaWQoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1dEV4dHJhKEludGVudENvbnN0LlNPVVJDRV9UWVBFX0tFWSwgRGF0YUNvbnN0LkZST01fQ09NTUVOVCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1dEV4dHJhKEludGVudENvbnN0LkNPTU1FTlRfSURfS0VZLCBvcENvbW1lbnRFbnRpdHkuZ2V0Q29udGVudGlkKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgSUNvbW1lbnRIb3N0IGhvc3QgPSBnZXRIb3N0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1dEV4dHJhKEludGVudENvbnN0LkNPTU1FTlRfSE9TVF9UWVBFLCBob3N0LmdldFR5cGUoKS5nZXRWYWx1ZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob3N0IGluc3RhbmNlb2YgQ29tbWVudEZlZWRIb3N0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmVlZERldGFpbEVudGl0eSBmZWVkID0gKChDb21tZW50RmVlZEhvc3QpIGhvc3QpLmdldEZlZWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1dEV4dHJhKEludGVudENvbnN0LkZFRURfVUlEX0tFWSwgZmVlZC5nZXRVaWQoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQUENvbW1vblJOSGVscGVyLnN0YXJ0UmVwb3J0UmVhY3RBY3Rpdml0eSgoQWN0aXZpdHkpIG1Db250ZXh0LCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvcHRpb25zUGFyYW1zLmFkZChyZXBvcnRJdGVtKTsKICAgICAgICB9CgogICAgICAgIGlmIChnZXRIb3N0KCkuY2FuRGVsZXRlKGNvbW1lbnRFbnRpdHkpKSB7CiAgICAgICAgICAgIE1lbnVEaWFsb2cuTWVudUl0ZW0gZGVsZXRlSXRlbSA9IG5ldyBNZW51RGlhbG9nLk1lbnVJdGVtKCk7CiAgICAgICAgICAgIGRlbGV0ZUl0ZW0uc2V0VGl0bGUobUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnBwX2NpcmNsZV9mZWVkX2NvbW1lbnRfb3BfZGVsZXRlKSk7CiAgICAgICAgICAgIGRlbGV0ZUl0ZW0uc2V0T25DbGlja0xpc3RlbmVyKAogICAgICAgICAgICAgICAgICAgIG5ldyBWaWV3Lk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soVmlldyB2aWV3KSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gw/fQx7eisrzGwMLb1rvT0NfUvLrE3Mm+s/0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29tbWVudEVudGl0eS5nZXRJc093bmVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgY29tbWVudEVudGl0eS5nZXRJZGVudGl0eSgpID09IFVzZXJJZGVudGl0eS5JREVOVElUWV9TVEFSKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFvUGFvVGlwcy5zaG93RGVmYXVsdFRvYXN0KG1Db250ZXh0LCBtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfZGVsX3N0YXJfY29tbWVudF9hbGVydCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgdGl0bGUgPSBtQ29udGV4dC5nZXRTdHJpbmcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIuc3RyaW5nLnBwX2NpcmNsZV9mZWVkX2NvbW1lbnRfb3BfZGVsZXRlX2NvbmZpcm0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nW10gaXRlbXMgPSBuZXcgU3RyaW5nW117CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIKGwyKHP+6GxILC0xaUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnBwX3NxdWFyZV9zZWFyY2hfY2FuY2VsKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gobDIt7aoobGwtMWlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1Db250ZXh0LmdldFN0cmluZyhSLnN0cmluZy5wcF9zcXVhcmVfc2VhcmNoX2NvbmZpcm0pfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDb25maXJtRGlhbG9nLkJ1aWxkZXIoKS5zZXREZXNjcmlwdGlvbih0aXRsZSkuc2V0QnV0dG9uSXRlbXMoaXRlbXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDb25maXJtTGlzdGVuZXIobmV3IENvbmZpcm1EaWFsb2cuT25Db25maXJtTGlzdGVuZXIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soQ29udGV4dCBjb250ZXh0LCBpbnQgd2hpY2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHdoaWNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIM34wufT0LTtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUFBUb29scy5nZXROZXR3b3JrU3RhdHVzKG1Db250ZXh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PSBQUFRvb2xzLklOVkFMSURfU1RBVEUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW9QYW9UaXBzLnNob3dEZWZhdWx0KG1Db250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbUNvbnRleHQuZ2V0UmVzb3VyY2VzKCkuZ2V0U3RyaW5nKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLnN0cmluZy5wcF9uZXR3b3JrX2ZhaWxfdGlwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gyb6z/dbQvfi2yM28seoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhb1Bhb1RpcHMuc2hvd1NtYWxsTG9hZGluZ0RpYWxvZygoQWN0aXZpdHkpIG1Db250ZXh0LCBtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfZGVsZXRpbmcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vILm51OzJvrP9x+vH83VybAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRSZXBvc2l0b3J5LmRlbGV0ZUNvbW1lbnQob3BDb21tZW50RW50aXR5LCBuZXcgRGVsZXRlQ29tbWVudFJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLkRlbGV0ZUNtdExpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uU3VjY2VzcygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbW1lbnRFbnRpdHkgY29tbWVudEVudGl0eSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL7PJuabJvrP9o6zNrLK9sb612Mr9vt294bm5o6yyosfSzajWqrj80MJVSQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLm5vdGlmeURhdGFTZXRDaGFuZ2VkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRDYWxsYmFjay5vbkNvbW1lbnREZWxldGVkKGNvbW1lbnRFbnRpdHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW9QYW9UaXBzLnNob3dTdWNjZXNzSW1hZ2VUb2FzdChtQ29udGV4dCwgbUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnBwX2RlbGV0ZWQpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkVycm9yKGludCBjb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIMm+s/3Kp7Dco6zP1Mq+yb6z/bTtzvPQxc+iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhb1Bhb1RpcHMuc2hvd0ZhaWxlZEltYWdlVG9hc3QobUNvbnRleHQsIG1Db250ZXh0LmdldFN0cmluZyhSLnN0cmluZy5wcF90b2FzdF9kZWxldGVfZmVlZF9yZWFzb25fZmFpbCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNob3cobUNvbnRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG9wdGlvbnNQYXJhbXMuYWRkKGRlbGV0ZUl0ZW0pOwogICAgICAgIH0KCiAgICAgICAgLy/T79L0xsDC29L+sti4tNbGsLTFpQogICAgICAgIGlmIChjb21tZW50RW50aXR5LmdldEF1ZGlvRW50aXR5KCkgPT0gbnVsbCkgewogICAgICAgICAgICBNZW51RGlhbG9nLk1lbnVJdGVtIGNvcHlJdGVtID0gbmV3IE1lbnVEaWFsb2cuTWVudUl0ZW0oKTsKICAgICAgICAgICAgY29weUl0ZW0uc2V0VGl0bGUobUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnBwX2NpcmNsZV9mZWVkX2NvbW1lbnRfb3BfY29weSkpOwogICAgICAgICAgICBjb3B5SXRlbS5zZXRPbkNsaWNrTGlzdGVuZXIoCiAgICAgICAgICAgICAgICAgICAgbmV3IFZpZXcuT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhWaWV3IHZpZXcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENsaXBib2FyZE1hbmFnZXIgY21iID0gKENsaXBib2FyZE1hbmFnZXIpIG1Db250ZXh0LmdldFN5c3RlbVNlcnZpY2UoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRleHQuQ0xJUEJPQVJEX1NFUlZJQ0UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY21iLnNldFByaW1hcnlDbGlwKENsaXBEYXRhLm5ld1BsYWluVGV4dChudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcENvbW1lbnRFbnRpdHkuZ2V0Q29udGVudCgpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW9QYW9UaXBzLnNob3dEZWZhdWx0KG1Db250ZXh0LCBtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfaGFzX2NvcGllZCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG9wdGlvbnNQYXJhbXMuYWRkKGNvcHlJdGVtKTsKICAgICAgICB9CgogICAgICAgIGlmICghKGNvbW1lbnRFbnRpdHkuZ2V0SXNPd25lcigpIHx8ICFnZXRIb3N0KCkuaXNJbnB1dEJveEVuYWJsZSgpKSkgewogICAgICAgICAgICBNZW51RGlhbG9nLk1lbnVJdGVtIHJlcGx5SXRlbSA9IG5ldyBNZW51RGlhbG9nLk1lbnVJdGVtKCk7CiAgICAgICAgICAgIHJlcGx5SXRlbS5zZXRUaXRsZShtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9vcF9yZXBseSkpOwogICAgICAgICAgICByZXBseUl0ZW0uc2V0T25DbGlja0xpc3RlbmVyKAogICAgICAgICAgICAgICAgICAgIG5ldyBWaWV3Lk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soVmlldyB2aWV3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50Q2FsbGJhY2sub25SZXBseUNvbW1lbnQob3BDb21tZW50RW50aXR5KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvcHRpb25zUGFyYW1zLmFkZChyZXBseUl0ZW0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGdldEhvc3QoKS5jYW5TaHV0VXAoY29tbWVudEVudGl0eSkpIHsKICAgICAgICAgICAgTWVudURpYWxvZy5NZW51SXRlbSBzaHV0VXBJdGVtID0gbmV3IE1lbnVEaWFsb2cuTWVudUl0ZW0oKTsKICAgICAgICAgICAgaWYgKG9wQ29tbWVudEVudGl0eS5pc1VzZXJTaHV0VXAoKSkgewogICAgICAgICAgICAgICAgc2h1dFVwSXRlbS5zZXRUaXRsZShtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9vcF9zaHV0X3VwX2NhbmNlbCkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2h1dFVwSXRlbS5zZXRUaXRsZShtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9vcF9zaHV0X3VwKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNodXRVcEl0ZW0uc2V0T25DbGlja0xpc3RlbmVyKG5ldyBWaWV3Lk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhWaWV3IHYpIHsKICAgICAgICAgICAgICAgICAgICBuZXcgUGluZ2JhY2soKS5zZXRUKFBpbmdiYWNrUGFyYW0uVFlQRV9DTElDSykuc2V0UnBhZ2UoUGluZ2JhY2tQYXJhbS5QQUdFX0ZFRURERVRBSUwpLnNldFJzZWF0KG9wQ29tbWVudEVudGl0eS5pc1VzZXJTaHV0VXAoKSA/ICI1MDU1NjZfMTIiIDogIjUwNTU2Nl8wNiIpLnNlbmQoKTsKICAgICAgICAgICAgICAgICAgICBDb21tb25GZWVkQ29udGVudEhlbHBlci50b2dnbGVTaHV0VXAobUNvbnRleHQsIG9wQ29tbWVudEVudGl0eS5pc1VzZXJTaHV0VXAoKSwgb3BDb21tZW50RW50aXR5LmdldFVpZCgpLCBnZXRIb3N0KCkuZ2V0V2FsbElkKCksIGdldEhvc3QoKS5nZXRPcmlnaW5JZCgpLCBvcENvbW1lbnRFbnRpdHkuZ2V0VWlkKCkgPT0gZ2V0SG9zdCgpLmdldE1hc3RlcklkKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgb3B0aW9uc1BhcmFtcy5hZGQoc2h1dFVwSXRlbSk7CiAgICAgICAgfQoKICAgICAgICBuZXcgTWVudURpYWxvZy5CdWlsZGVyKCkuc2V0TWVudUl0ZW1zKG9wdGlvbnNQYXJhbXMpLnNob3cobUNvbnRleHQpOwogICAgfQoKCiAgICAvKioKICAgICAqIFY3LjYg0MLU9iC4/NDCxsDC28HQse3U3te0zKwKICAgICAqLwogICAgcHVibGljIHZvaWQgdXBkYXRlSXRlbUFncmVlVmlldyhmaW5hbCBUZXh0VmlldyBwcmFpc2VDb3VudCwgZmluYWwgSW1hZ2VWaWV3IHByYWlzZUl2LCBDb21tZW50RW50aXR5IGNvbW1lbnREYXRhKSB7CgogICAgICAgIGlmIChwcmFpc2VDb3VudCA9PSBudWxsIHx8IGNvbW1lbnREYXRhID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpbnQgY291bnQgPSBjb21tZW50RGF0YS5nZXRBZ3JlZUNvdW50KCk7CiAgICAgICAgaWYgKGNvdW50ID4gMCkgewogICAgICAgICAgICBwcmFpc2VDb3VudC5zZXRUZXh0KFN0cmluZ1V0aWxzLmdldFVuaWZpZWREaXNwbGF5Q291bnQoY291bnQpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcmFpc2VDb3VudC5zZXRUZXh0KCIiKTsKICAgICAgICB9CiAgICAgICAgaWYgKGNvbW1lbnREYXRhLmhhc0FncmVlKCkpIHsKICAgICAgICAgICAgcHJhaXNlSXYuc2V0SW1hZ2VSZXNvdXJjZShSLmRyYXdhYmxlLnBwX3F6X2ZlZWRfbGlrZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcHJhaXNlSXYuc2V0SW1hZ2VSZXNvdXJjZShSLmRyYXdhYmxlLnBwX3F6X2ZlZWRfdW5saWtlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBWNy42INDC1PYgxsDC27Xj1N4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGhhbmRsZUNvbW1lbnRBZ3JlZShmaW5hbCBUZXh0VmlldyBjbGlja2VkVGV4dFZpZXcsIGZpbmFsIEltYWdlVmlldyBsaWtlSXYsIGZpbmFsIGludCBjb21tZW50SXRlbVBvc2l0aW9uKSB7CiAgICAgICAgaWYgKGNsaWNrZWRUZXh0VmlldyA9PSBudWxsIHx8IGdldENvbW1lbnRMaXN0KCkgPT0gbnVsbCkgewogICAgICAgICAgICBQUExvZy5lKFRBRywgImVycm9yOiBoYW5kbGUgQWdyZWUgLCBsaWtlZCB2aWV3IG5vdCBzaG93ICIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvL1Y3LjYg0MLU9iC149TeZW50aXR5CiAgICAgICAgZmluYWwgQ29tbWVudEVudGl0eSBjb21tZW50RW50aXR5ID0gZ2V0Q29tbWVudExpc3QoKS5nZXQoY29tbWVudEl0ZW1Qb3NpdGlvbik7CgogICAgICAgIFN0cmluZyBhbmltYXRpb25GaWxlTmFtZTsKICAgICAgICBpZiAoIWNvbW1lbnRFbnRpdHkuaGFzQWdyZWUoKSkgewogICAgICAgICAgICBhbmltYXRpb25GaWxlTmFtZSA9ICJkaXNhZ3JlZS5qc29uIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbmltYXRpb25GaWxlTmFtZSA9ICJhZ3JlZS5qc29uIjsKICAgICAgICB9CgogICAgICAgIEZlZWRDb21tb25IZWxwZXIubGlrZSghY29tbWVudEVudGl0eS5oYXNBZ3JlZSgpLCBtTGlzdFZpZXcsIGxpa2VJdiwKICAgICAgICAgICAgICAgIFVJVXRpbHMuZGlwMnB4KDY1KSwgVUlVdGlscy5kaXAycHgoNjUpKTsKCiAgICAgICAgLy+3orP20ru0zs34wufH68fzo6zN+MLnzrTTprTw1q7HsKOssrvUytDt1Nm0zrSlt6K149TeoaMKICAgICAgICB1cGRhdGVDbGlja2FibGUoZmFsc2UsIGNsaWNrZWRUZXh0Vmlldyk7CiAgICAgICAgLy/U2bTOo6y4+b7dt/7O8bbLt7W72LXEZmVlZMbAwtvB0LHtxdC2z8O/0rvM9cbAwtvKx7fxteO5/dTeCiAgICAgICAgaWYgKGNvbW1lbnRFbnRpdHkuaGFzQWdyZWUoKSkgey8vt/7O8bbLxsDC29e0zKzOqtLRtePU3gogICAgICAgICAgICBjb21tZW50UmVwb3NpdG9yeS5yZW1vdmVDb21tZW50QWdyZWUoY29tbWVudEVudGl0eSxuZXcgQWdyZWVDb21tZW50UmVxdWVzdC5BZ3JlZUNvbW1lbnRSZXF1ZXN0TGlzdGVuZXIoKSB7CgogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvblN1Y2Nlc3MoU3RyaW5nIHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNsaWNrYWJsZSh0cnVlLCBjbGlja2VkVGV4dFZpZXcpOy8vzfjC58frx/PTprTwo6y71ri0tePU3rC0xaW/ybXju/fXtMysoaMKICAgICAgICAgICAgICAgICAgICBjb21tZW50Q2FsbGJhY2sub25Db21tZW50RGlzQWdyZWVkKGNvbW1lbnRFbnRpdHkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25FcnJvcihTdHJpbmcgcmVhc29uKSB7CiAgICAgICAgICAgICAgICAgICAgUGFvUGFvVGlwcy5zaG93RGVmYXVsdChtQ29udGV4dCwgcmVhc29uKTsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVDbGlja2FibGUodHJ1ZSwgY2xpY2tlZFRleHRWaWV3KTsvL834wufH68fz06a08KOsu9a4tLXj1N6wtMWlv8m147v317TMrKGjCiAgICAgICAgICAgICAgICAgICAgLy+72Ln2Ci8vICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLm5vdGlmeURhdGFTZXRDaGFuZ2VkKCk7CiAgICAgICAgICAgICAgICAgICAgYWRhcHRlci5ub3RpZnlJdGVtQ2hhbmdlZChjb21tZW50SXRlbVBvc2l0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgoKICAgICAgICB9IGVsc2Ugey8vt/7O8bbLxsDC29e0zKzOqs60tePU3goKICAgICAgICAgICAgY29tbWVudFJlcG9zaXRvcnkuYWdyZWVDb21tZW50KGNvbW1lbnRFbnRpdHksbmV3IEFncmVlQ29tbWVudFJlcXVlc3QuQWdyZWVDb21tZW50UmVxdWVzdExpc3RlbmVyKCkgewoKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25TdWNjZXNzKFN0cmluZyByZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVDbGlja2FibGUodHJ1ZSwgY2xpY2tlZFRleHRWaWV3KTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50Q2FsbGJhY2sub25Db21tZW50QWdyZWVkKGNvbW1lbnRFbnRpdHkpOwogICAgICAgICAgICAgICAgICAgIENvbW1lbnRzSGVscGVyLmdldENvbW1lbnRzR2VuZXJhbFBpbmdiYWNrKGdldEhvc3QoKSwgcnBhZ2UpLnNldFQoUGluZ2JhY2tQYXJhbS5MT0dfVFlQRV9MSUtFX0ZFRURfQ09NTUVOVCkuc2VuZCgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25FcnJvcihTdHJpbmcgcmVhc29uKSB7CiAgICAgICAgICAgICAgICAgICAgUGFvUGFvVGlwcy5zaG93RGVmYXVsdChtQ29udGV4dCwgcmVhc29uKTsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVDbGlja2FibGUodHJ1ZSwgY2xpY2tlZFRleHRWaWV3KTsKICAgICAgICAgICAgICAgICAgICAvL7vYufYKLy8gICAgICAgICAgICAgICAgICAgIGFkYXB0ZXIubm90aWZ5RGF0YVNldENoYW5nZWQoKTsKICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLm5vdGlmeUl0ZW1DaGFuZ2VkKGNvbW1lbnRJdGVtUG9zaXRpb24pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgLy/P7NOmsb612LzZ0LTK/b7dINXiwO9yZWN5Y2xlclZpZXfU2m5vdGlmeURhdGFTZXRDaGFuZ2Vk1q6686Os1q7HsLXEaXRlbVZpZXexu7i008PU2sHLsfC1xLXYt72howogICAgICAgIGFkYXB0ZXIubm90aWZ5SXRlbUNoYW5nZWQoY29tbWVudEl0ZW1Qb3NpdGlvbik7CiAgICB9CgogICAgLyoqCiAgICAgKiC4/NDCtePU3iBUZXh0VmlldyC/ybXj17TMrAogICAgICovCiAgICBwcml2YXRlIHZvaWQgdXBkYXRlQ2xpY2thYmxlKGJvb2xlYW4gY2xpY2thYmxlLCBUZXh0VmlldyB0ZXh0VmlldykgewogICAgICAgIHRleHRWaWV3LnNldENsaWNrYWJsZShjbGlja2FibGUpOwogICAgfQoKCiAgICAvKioKICAgICAqILzGy+NsaXN0Vmlld9bQv8m8+7K/t9a1xGhlYWRlclZpZXfK/cG/CiAgICAgKi8KICAgIHByaXZhdGUgaW50IGdldFZpc2libGVIZWFkZXJWaWV3c0NvdW50KCkgewogICAgICAgIGludCBoZWFkZXJDb3VudCA9IDA7Ly+12tK7uPZpdGVtysdoZWFkZXKjrHdoaWxl0a27t8XQts8gz8LSu7j2v8m8+2l0ZW3Kx7K7ysdIZWFkZXIKICAgICAgICB3aGlsZSAoIShtTGlzdFZpZXcuZ2V0Q29udGVudFZpZXcoKS5nZXRDaGlsZEF0KGhlYWRlckNvdW50KS5nZXRUYWcoKSBpbnN0YW5jZW9mIENvbW1lbnRIb2xkZXIpKSB7CiAgICAgICAgICAgIGhlYWRlckNvdW50Kys7CiAgICAgICAgfQogICAgICAgIHJldHVybiBoZWFkZXJDb3VudDsKICAgIH0KCgogICAgLyoqCiAgICAgKiDTptPDtv68ttKzw+a1xMr9vt2x5LuvCiAgICAgKgogICAgICogQHBhcmFtIGRhdGEgseS7r8r9vt3S1LywwODQzQogICAgICovCiAgICBwdWJsaWMgdm9pZCBwcm9jZXNzQ2hhbmdlZERhdGEoQ2hhbmdlZERhdGFPZkNvbW1lbnRzIGRhdGEpIHsKICAgICAgICBjb21tZW50UmVwb3NpdG9yeS5wcm9jZXNzQ2hhbmdlZERhdGEoZGF0YSk7CiAgICAgICAgYWRhcHRlci5ub3RpZnlEYXRhU2V0Q2hhbmdlZCgpOwogICAgfQoKICAgIC8qKioKICAgICAqIL370dSzybmmuvO82dC0yv2+3QogICAgICovCiAgICBwdWJsaWMgdm9pZCBwcm9jZXNzU2h1dFVwU3RhdGVDaGFuZ2VkKGxvbmcgdWlkLCBib29sZWFuIHNodXR1cCkgewogICAgICAgIGNvbW1lbnRSZXBvc2l0b3J5LnByb2Nlc3NTaHV0VXBTdGF0ZUNoYW5nZWQodWlkLCBzaHV0dXApOwogICAgfQoKICAgIHB1YmxpYyBDb21tZW50c0NvbmZpZ3VyYXRpb24gZ2V0Q29uZmlnKCkgewogICAgICAgIHJldHVybiBjb25maWc7CiAgICB9CgogICAgLy90b2RvIGhvc3TTprjD1/fOqmNvbW1lbnRSZXBvc2l0b3J5u7nKx21vZGVs1tC1xNK7uPa21M/zo78KICAgIHB1YmxpYyBJQ29tbWVudEhvc3QgZ2V0SG9zdCgpIHsKICAgICAgICByZXR1cm4gY29tbWVudFJlcG9zaXRvcnkuZ2V0SG9zdCgpOwogICAgfQoKICAgIHB1YmxpYyBjbGFzcyBDb21tZW50c0FkYXB0ZXIgZXh0ZW5kcyBSZWN5Y2xlclZpZXcuQWRhcHRlcgogICAgewoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgUmVjeWNsZXJWaWV3LlZpZXdIb2xkZXIgb25DcmVhdGVWaWV3SG9sZGVyKFZpZXdHcm91cCB2aWV3R3JvdXAsIGludCBpKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tbWVudEhvbGRlcihMYXlvdXRJbmZsYXRlci5mcm9tKG1Db250ZXh0KS5pbmZsYXRlKFIubGF5b3V0LnBwX2ZlZWRfY29tbWVudF9pdGVtLG51bGwpKTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIG9uQmluZFZpZXdIb2xkZXIoUmVjeWNsZXJWaWV3LlZpZXdIb2xkZXIgdmlld0hvbGRlciwgaW50IGkpIHsKICAgICAgICAgICAgdXBkYXRlSXRlbVZpZXcoaSwoQ29tbWVudEhvbGRlcikgdmlld0hvbGRlcik7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgaW50IGdldEl0ZW1Db3VudCgpIHsKICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25VdGlscy5zaXplKGdldENvbW1lbnRMaXN0KCkpOwogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSB2b2lkIHVwZGF0ZUl0ZW1WaWV3KGZpbmFsIGludCBwb3NpdGlvbiwgZmluYWwgQ29tbWVudEhvbGRlciBjb21tZW50SG9sZGVyKSB7CiAgICAgICAgICAgIFBQTG9nLmQoInVwZGF0ZUl0ZW1WaWV3IHBvc2l0aW9uID0gIiArIHBvc2l0aW9uKTsKLy8gubnU7M/Uyr7K/b7dCiAgICAgICAgICAgIGZpbmFsIFZpZXcgY249Y29tbWVudEhvbGRlci5pdGVtVmlldzsKICAgICAgICAgICAgZmluYWwgQ29tbWVudEVudGl0eSBkYXRhID0gZ2V0Q29tbWVudExpc3QoKS5nZXQocG9zaXRpb24pOwogICAgICAgICAgICAvL9Lss6O0psDtwt+8rQogICAgICAgICAgICBpZiAoY29tbWVudEhvbGRlciA9PSBudWxsIHx8IGRhdGEgPT0gbnVsbCB8fCBnZXRDb21tZW50TGlzdCgpID09IG51bGwKICAgICAgICAgICAgICAgICAgICB8fCBnZXRDb21tZW50TGlzdCgpLnNpemUoKSA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vyejWw76rssrGwMLb0+vG1c2oxsDC27fWuO7P3woKICAgICAgICAgICAgLy9QYW9wYW8gMTYwCiAgICAgICAgICAgIC8v1tjWw7/JvPvQ1AogICAgICAgICAgICBjb21tZW50SG9sZGVyLmNvbW1lbnRzRGl2aWRlZExpbmUuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOy8vyc+yv73PtNa31rjuz98KICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50c0RlY29yYXRlVHYuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOy8vvquyysbAwtu78tXfyKuyv8bAwtsKICAgICAgICAgICAgY29tbWVudEhvbGRlci5sb2FkaW5nQmFyLnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKCiAgICAgICAgICAgIGlmICghaXNPbmx5SG90KCkpIHsKICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PSAwICYmIGdldENvbW1lbnRMaXN0KCkuZ2V0KHBvc2l0aW9uKS5nZXRJc0hvdCgpICYmICFjb25maWcuaXNIaWRlVG9wVGV4dCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy/I57n7zqq12tK7uPa+q7LKxsDC26Osyc+yv8/Uyr6+q7LKxsDC2wogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuY29tbWVudHNEaXZpZGVkTGluZS5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50c0RlY29yYXRlVHYuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuaG90Q29tbWVudHNEZWNvcmF0ZVR2LnNldFRleHQobUNvbnRleHQuZ2V0UmVzb3VyY2VzKCkuZ2V0U3RyaW5nKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9uaWNlX2l0ZW0pKTsKICAgICAgICAgICAgICAgICAgICBWaWV3VXRpbHMuc2V0VmlzaWJpbGl0eShjb21tZW50SG9sZGVyLmxvYWRpbmdCYXIsIGlzTG9hZGluZyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYm9vbGVhbiBwcmV2aW91c0lzSG90ID0gcG9zaXRpb24gPj0gMSAmJiBnZXRDb21tZW50TGlzdCgpLmdldChwb3NpdGlvbiAtIDEpLmdldElzSG90KCk7CiAgICAgICAgICAgICAgICBib29sZWFuIGlzRmlyc3RPbmUgPSBwb3NpdGlvbiA9PSAwOwogICAgICAgICAgICAgICAgaWYgKChwcmV2aW91c0lzSG90IHx8IChpc0ZpcnN0T25lICYmICFnZXRDb25maWcoKS5pc0luZGVwZW5kZW50KCkpKSAmJiAhbU1vZGVsLmdldENvbW1lbnRzTGlzdCgpLmdldChwb3NpdGlvbikuZ2V0SXNIb3QoKQogICAgICAgICAgICAgICAgICAgICAgICAmJiAhZ2V0Q29uZmlnKCkuaXNIaWRlVG9wVGV4dCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy+1scewzqrG1c2oo6zJz9K7uPbOqr6rsso7u/LV37Wxx7DOqsbVzajH0s6qtdrSu7j2CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5jb21tZW50c0RpdmlkZWRMaW5lLnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmhvdENvbW1lbnRzRGVjb3JhdGVUdi5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50c0RlY29yYXRlVHYuc2V0VGV4dChtQ29udGV4dC5nZXRSZXNvdXJjZXMoKS5nZXRTdHJpbmcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLnN0cmluZy5wcF9jaXJjbGVfZmVlZF9jb21tZW50X2FsbF9pdGVtKSk7CiAgICAgICAgICAgICAgICAgICAgVmlld1V0aWxzLnNldFZpc2liaWxpdHkoY29tbWVudEhvbGRlci5sb2FkaW5nQmFyLCBpc0xvYWRpbmcpOwogICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0lzSG90KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIExpbmVhckxheW91dC5MYXlvdXRQYXJhbXMgbGF5b3V0UGFyYW1zID0gKExpbmVhckxheW91dC5MYXlvdXRQYXJhbXMpIGNvbW1lbnRIb2xkZXIuY29tbWVudHNEaXZpZGVkTGluZS5nZXRMYXlvdXRQYXJhbXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0UGFyYW1zLnRvcE1hcmdpbiA9IFZpZXdVdGlscy5kcDJweChtQ29udGV4dCwgNik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuY29tbWVudHNEaXZpZGVkTGluZS5zZXRMYXlvdXRQYXJhbXMobGF5b3V0UGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT0gMCkgewogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuY29tbWVudHNEaXZpZGVkTGluZS5zZXRWaXNpYmlsaXR5KGdldENvbmZpZygpLmlzSGlkZVRvcERpdmlkZXIoKSA/IFZpZXcuR09ORSA6IFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBlbmQgb2YgUGFvcGFvIDE2MAoKICAgICAgICAgICAgICAgIC8vz+rH6dKzz9TKvrj8tuAKICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PSBnZXRIb3RDb21tZW50Q3VycmVudENvdW50KCkgLSAxIC8vzrvWwwogICAgICAgICAgICAgICAgICAgICAgICAmJiBnZXRIb3RDb21tZW50VG90YWxDb3VudCgpID4gZ2V0SG90Q29tbWVudEN1cnJlbnRDb3VudCgpLy+089Pa0rvSswogICAgICAgICAgICAgICAgICAgICAgICAmJiBnZXRDb21tZW50TGlzdCgpLmdldChwb3NpdGlvbikuZ2V0SXNIb3QoKQogICAgICAgICAgICAgICAgICAgICAgICAmJiBjb25maWcuc2hvd0hvdENvbW1lbnRzKCkKICAgICAgICAgICAgICAgICAgICAgICAgJiYgZ2V0SG9zdCgpLnNob3dIb3RDb21tZW50cygpKSB7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50Vmlld01vcmVMYXlvdXQuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuaG90Q29tbWVudFZpZXdNb3JlLnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmhvdENvbW1lbnRWaWV3TW9yZS5zZXRUZXh0KFN0cmluZy5mb3JtYXQoIrLpv7S4/LbgKCVkKSIsIGdldEhvdENvbW1lbnRUb3RhbENvdW50KCkgLSBnZXRIb3RDb21tZW50Q3VycmVudENvdW50KCkpKTsKICAgICAgICAgICAgICAgICAgICBuZXcgUGluZ2JhY2soKS5zZXRCbG9jaygiNTA1MzQxXzAyIikuc2V0VChQaW5nYmFja1BhcmFtLlRZUEVfUEFHRV9TSE9XKS5zZW5kKCk7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50Vmlld01vcmVMYXlvdXQuc2V0T25DbGlja0xpc3RlbmVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZpZXcuT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soVmlldyB2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGdldEhvc3QoKSBpbnN0YW5jZW9mIENvbW1lbnRGZWVkSG9zdCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGluZ2JhY2soKS5zZXRSc2VhdCgiNTA1NTkxXzAxIikuc2V0VCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaW5nYmFja1BhcmFtLlRZUEVfQ0xJQ0spLnNlbmQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEhvdENvbW1lbnRzQWN0aXZpdHkuSG90Q29tbWVudHNKdW1wSGVscGVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q29udGV4dChtQ29udGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0RmVlZCgoKENvbW1lbnRGZWVkSG9zdCkgZ2V0SG9zdCgpKS5nZXRGZWVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEZvY3VzQ29tbWVudENvdW50KGdldEhvdENvbW1lbnRDdXJyZW50Q291bnQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVtcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmhvdENvbW1lbnRWaWV3TW9yZUxheW91dC5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50Vmlld01vcmUuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvL2NvbW1lbnRIb2xkZXIubG9jYXRpb24uc2V0VGV4dChtQ3RyZS5nZXRDbXRMaXN0KCkuZ2V0KHBvc2l0aW9uKS5nZXRMb2NhdGlvbigpKTsKICAgICAgICAgICAgLy8gu9i4tMbAwtu5psTcKMjnufvKx8P30MfU3rn9tcTGwMLbLMTHw7TIodfUye3OqrG7u9i4tMbAwtspCiAgICAgICAgICAgIGZpbmFsIENvbW1lbnRFbnRpdHkgcmVwbGllZENvbW1lbnQgPSBkYXRhLmlzU3RhclByYWlzZU1vZGUoKSA/IGRhdGEgOiBkYXRhLmdldFJlcGxpZWRDb21tZW50KCk7CiAgICAgICAgICAgIC8vse3H6cv10KG1xNa1CiAgICAgICAgICAgIGludCBleHByZXNzaW9uU3ppZSA9IFZpZXdVdGlscy5kcDJweChtQ29udGV4dCwgNSk7CiAgICAgICAgICAgIGlmIChyZXBsaWVkQ29tbWVudCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50TGF5b3V0LnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgIFN0cmluZyBwcmFpc2VUbyA9IG1Db250ZXh0LmdldFN0cmluZygKICAgICAgICAgICAgICAgICAgICAgICAgUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9vcF9wcmlhc2VfY29ubmVjdGlvbik7CiAgICAgICAgICAgICAgICBTdHJpbmcgcmVwbHlUbyA9IG1Db250ZXh0LmdldFN0cmluZygKICAgICAgICAgICAgICAgICAgICAgICAgUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9vcF9yZXBseV9jb25uZWN0aW9uKTsKICAgICAgICAgICAgICAgIFN0cmluZyByZXBsaWVkVXNlck5hbWUgPSByZXBsaWVkQ29tbWVudC5nZXRVbmFtZSgpOwogICAgICAgICAgICAgICAgZmluYWwgU3RyaW5nIHJlcGx5Q29udGVudCA9CiAgICAgICAgICAgICAgICAgICAgICAgIChkYXRhLmlzU3RhclByYWlzZU1vZGUoKSA/IHByYWlzZVRvIDogcmVwbHlUbykgKyByZXBsaWVkVXNlck5hbWU7CiAgICAgICAgICAgICAgICAvL7HqzOLW0LvYuLTXtMyszsSwuAogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5jb21tZW50VHlwZURlc2Muc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5jb21tZW50VHlwZURlc2Muc2V0VGV4dChyZXBseUNvbnRlbnQpOwogICAgICAgICAgICAgICAgaW50IHJlcGxpZWRDb21tZW50U3RhdHVzID0gcmVwbGllZENvbW1lbnQuZ2V0U3RhdHVzKCk7CiAgICAgICAgICAgICAgICBpZiAocmVwbGllZENvbW1lbnRTdGF0dXMgPT0gMSkgey8vMCDV/bOjzKyjrDEgyb6z/cyso6wzILT9yfPXtMysCiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudFRpdGxlTGF5b3V0LnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50Q29udGVudExheW91dC5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudFJlbW92ZWRMYXlvdXQuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50VGl0bGVMYXlvdXQuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIucmVwbGllZENvbW1lbnRDb250ZW50TGF5b3V0LnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50UmVtb3ZlZExheW91dC5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICAgICAgLy+xu7vYuLTUrcq8xsDC27XExNrI3QogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIucmVwbGllZENvbW1lbnRVc2VyLnNldFRleHQocmVwbGllZFVzZXJOYW1lICsgIjoiKTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50Rmxvb3Iuc2V0VGV4dChyZXBsaWVkQ29tbWVudC5nZXRGbG9vcigpICsgIsKlIik7CiAgICAgICAgICAgICAgICAgICAgaW50IHRleHRWaWV3U2l6ZSA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW50KSBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50Q29udGVudC5nZXRNYWluQ29udGVudCgpLmdldFRleHRTaXplKCktZXhwcmVzc2lvblN6aWU7CiAgICAgICAgICAgICAgICAgICAgU3Bhbm5hYmxlU3RyaW5nIGV4cHJlc3Npb25UZXh0ID0gRW1vdGlvbkVkaXRVdGlscy5nZXRFeHByZXNzaW9uVGV4dCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1Db250ZXh0LCByZXBsaWVkQ29tbWVudC5nZXRDb250ZW50KCksIHRleHRWaWV3U2l6ZSk7CgoKICAgICAgICAgICAgICAgICAgICBDaGFyU2VxdWVuY2UgY29uY2F0ID0gZXhwcmVzc2lvblRleHQ7CiAgICAgICAgICAgICAgICAgICAgaWYocmVwbGllZENvbW1lbnQuZ2V0TWVkaWFFbnRpdHkoKSAhPSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHNvdXJjZSA9ICJbzbzGrF0iOwogICAgICAgICAgICAgICAgICAgICAgICBTcGFubmFibGVTdHJpbmcgcGljTGluayA9IG5ldyBTcGFubmFibGVTdHJpbmcoc291cmNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgRm9yZWdyb3VuZENvbG9yU3BhbiB0ZXh0Q29sb3IgPSBuZXcgRm9yZWdyb3VuZENvbG9yU3BhbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtQ29udGV4dC5nZXRSZXNvdXJjZXMoKS5nZXRDb2xvcihSLmNvbG9yLmNvbG9yXzBiYmUwNikpOwogICAgICAgICAgICAgICAgICAgICAgICBwaWNMaW5rLnNldFNwYW4odGV4dENvbG9yLCAwLHBpY0xpbmsubGVuZ3RoKCkgLCBTcGFubmVkLlNQQU5fRVhDTFVTSVZFX0VYQ0xVU0lWRSk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgU2FtcGxlQ2xpY2thYmxlU3BhbiBjbGlja2FibGVTcGFuID0gbmV3IFNhbXBsZUNsaWNrYWJsZVNwYW4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uTG9uZ0NsaWNrKFZpZXcgd2lkZ2V0KSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhWaWV3IHZpZXcpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXlMaXN0PE1lZGlhRW50aXR5PiBtZWRpYUVudGl0aWVzID0gbmV3IEFycmF5TGlzdDw+KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFFbnRpdGllcy5hZGQocmVwbGllZENvbW1lbnQuZ2V0TWVkaWFFbnRpdHkoKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZlZWRKdW1wZXIuanVtcDJQcmV2aWV3UGhvdG9zKG1Db250ZXh0LDAsIDAsIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYUVudGl0aWVzLCBmYWxzZSwgSVZpZXdIb2xkZXJDaXJjbGVDb25zdC5GUk9NX0ZFRURfREVUQUlMX1BBR0UsbnVsbCxudWxsKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBwaWNMaW5rLnNldFNwYW4oY2xpY2thYmxlU3BhbiwgMCxwaWNMaW5rLmxlbmd0aCgpICwgU3Bhbm5lZC5TUEFOX0VYQ0xVU0lWRV9FWENMVVNJVkUpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25jYXQgPSAgVGV4dFV0aWxzLmNvbmNhdChjb25jYXQsIHBpY0xpbmspOwogICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50Q29udGVudC5nZXRNYWluQ29udGVudCgpLnNldE9uVG91Y2hMaXN0ZW5lcihuZXcgTGlua01vdmVtZW50TWV0aG9kT3ZlcnJpZGUoKSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50Q29udGVudC5zZXRUZXh0KGNvbmNhdCk7CgogICAgICAgICAgICAgICAgICAgIC8vsbu72Li01K3KvMbAwtvW0LD8uqzT79L0u9i4tNDFz6IKICAgICAgICAgICAgICAgICAgICBBdWRpb0VudGl0eSByZXBsaWVkQ29tbWVudEF1ZGlvID0gcmVwbGllZENvbW1lbnQuZ2V0QXVkaW9FbnRpdHkoKTsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSByZXBsaWVkQ29tbWVudEF1ZGlvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIucmVwbGllZENvbW1lbnRDb250ZW50LnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudFNvdW5kVmlldy5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIucmVwbGllZENvbW1lbnRTb3VuZFZpZXcuc2V0U291bmREYXRhKHJlcGxpZWRDb21tZW50QXVkaW8pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7Ly/Wu8/Uyr7T79L0us3OxNfWzsSwuMjO0uLSu9bWCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIucmVwbGllZENvbW1lbnRDb250ZW50LnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudFNvdW5kVmlldy5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5jb21tZW50VHlwZURlc2Muc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudExheW91dC5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vxsDC287EsLjE2sjdCiAgICAgICAgICAgIGludCB0ZXh0Vmlld1NpemUgPSAoaW50KSBjb21tZW50SG9sZGVyLmNvbnRlbnQuZ2V0TWFpbkNvbnRlbnQoKS5nZXRUZXh0U2l6ZSgpLWV4cHJlc3Npb25TemllOwogICAgICAgICAgICBjb21tZW50SG9sZGVyLmNvbnRlbnQuc2V0VGV4dChFbW90aW9uRWRpdFV0aWxzLmdldEV4cHJlc3Npb25UZXh0KG1Db250ZXh0LCBkYXRhLmdldENvbnRlbnQoKSwKICAgICAgICAgICAgICAgICAgICB0ZXh0Vmlld1NpemUpKTsKICAgICAgICAgICAgLy/GwMLb0+/S9MTayN0KICAgICAgICAgICAgLy9jaGVuaHVhY2hvbmdAcWl5aS5jb20gyOe5+8rH0+/S9MbAwtvU8tW5yr5Tb3VuZEl0ZW1WaWV3IFNUQVJUCiAgICAgICAgICAgIEF1ZGlvRW50aXR5IGF1ZGlvRW50aXR5ID0gZGF0YS5nZXRBdWRpb0VudGl0eSgpOwogICAgICAgICAgICBpZiAoYXVkaW9FbnRpdHkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5zb3VuZEl0ZW1WaWV3LnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuc291bmRJdGVtVmlldy5zZXRTb3VuZERhdGEoYXVkaW9FbnRpdHkpOwogICAgICAgICAgICAgICAgLy88IS0tIFY3LjkgyOe5+8rH0+/S9MbAwtvU8r32vfZTb3VuZEl0ZW1WaWV3IKOssrvVucq+IENvbnRlbnTOxLC4IGxhbmdqaWFuQHFpeWkuY29tICBTVEFSVC0tPgogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5jb250ZW50LnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgIC8vPCEtLSBWNy45IMjnufvKx9Pv0vTGwMLb1PK99r32U291bmRJdGVtVmlldyCjrLK71bnKviBDb250ZW50zsSwuCBsYW5namlhbkBxaXlpLmNvbSAgRU5ELS0+CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmNvbnRlbnQuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5zb3VuZEl0ZW1WaWV3LnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2NoZW5odWFjaG9uZ0BxaXlpLmNvbSDI57n7ysfT79L0xsDC29Ty1bnKvlNvdW5kSXRlbVZpZXcgRU5ECgogICAgICAgICAgICBsb25nIGZsb29yID0gZGF0YS5nZXRGbG9vcigpOwogICAgICAgICAgICAvL8S/x7C3/s7xxvfJz7j4tcTK/b7do6zI57n7ysdmbG9vciA9IDCjrNKyse3D98O709DCpbLj0MXPoqGjCiAgICAgICAgICAgIGlmIChmbG9vciA+IDApIHsKICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuZmxvb3Iuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5mbG9vci5zZXRUZXh0KFN0cmluZy5mb3JtYXQobUNvbnRleHQuZ2V0UmVzb3VyY2VzKCkuZ2V0U3RyaW5nKAogICAgICAgICAgICAgICAgICAgICAgICBSLnN0cmluZy5wcF9xel9mbG9vcl9mb3JtYXQpLCBTdHJpbmcudmFsdWVPZihmbG9vcikpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuZmxvb3Iuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGF0YS5pc1N0YXJQcmFpc2VNb2RlKCkpIHsKICAgICAgICAgICAgICAgIC8vw/fQx7Xj1N7Eo8q9LL2r0v6y2MbAwtvE2sjdus3CpbLjyv0KICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuc291bmRJdGVtVmlldy5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmNvbnRlbnQuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5mbG9vci5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9WNy42INDC1PYKICAgICAgICAgICAgdXBkYXRlSXRlbUFncmVlVmlldyhjb21tZW50SG9sZGVyLnByYWlzZUNvdW50VHYsIGNvbW1lbnRIb2xkZXIucHJhaXNlSXYsIGRhdGEpOwogICAgICAgICAgICAvL1Y3LjYg0MLU9iC149TestnX9wogICAgICAgICAgICBjb21tZW50SG9sZGVyLnByYWlzZUxheW91dC5zZXRPbkNsaWNrTGlzdGVuZXIobmV3IFZpZXcuT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkNsaWNrKFZpZXcgdikgewogICAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbW1lbnRBZ3JlZShjb21tZW50SG9sZGVyLnByYWlzZUNvdW50VHYsIGNvbW1lbnRIb2xkZXIucHJhaXNlSXYsIHBvc2l0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjb21tZW50SG9sZGVyLnRpbWUuc2V0VGV4dChTdHJpbmdVdGlscy5nZXRUaW1lR2FwKG1Db250ZXh0LCBkYXRhLmdldEFkZFRpbWUoKSkpOwogICAgICAgICAgICBib29sZWFuIGlzT3duZXIgPSBDb21tb25Vc2VySW5mb1V0aWxzLmdldFVzZXJJZChQUENvbW1vbkFwcC5nZXRQYW9QYW9Db250ZXh0KCkpID09IGRhdGEuZ2V0VWlkKCk7CiAgICAgICAgICAgIGRhdGEuc2V0SXNPd25lcihpc093bmVyKTsKCiAgICAgICAgICAgIC8vUFBJbWFnZUxvYWRlci5sb2FkSW1hZ2VXaXRoUmV0cnkoY29tbWVudEhvbGRlci5pY29uLFIuZHJhd2FibGUucHBfaWNvbl9hdmF0YXJfZGVmYXVsdCwKICAgICAgICAgICAgLy8gZGF0YS5pc1N0YXJQcmFpc2VNb2RlKCkgPyBkYXRhLmdldFN0YXJVc2VySW5mb0VudGl0eSgpLmdldEljb24oKTpkYXRhLmdldEljb24oKSxmYWxzZSk7CiAgICAgICAgICAgIC8vbUltYWdlTG9hZGVyLmRpc3BsYXlJbWFnZShkYXRhLmdldEljb24oKSwgY29tbWVudEhvbGRlci5pY29uKTsKICAgICAgICAgICAgY29tbWVudEhvbGRlci5pY29uLnNldEltYWdlVVJJKAogICAgICAgICAgICAgICAgICAgIGRhdGEuaXNTdGFyUHJhaXNlTW9kZSgpID8gZGF0YS5nZXRTdGFyVXNlckluZm9FbnRpdHkoKS5nZXRJY29uKCkgOiBkYXRhLmdldEljb24oKSk7CgogICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqIGN3ayCypbfFxNq6y9TaNy42uvOjrMrTxrWypbfFyrFpdGVts6SwtMrCvP674cqn0KejrLb419NWaWV3s6SwtNPQ0KejrM/IuPy4xMjnz8Igc3RhcnQgKioqKioqKioqKioqKioqLwogICAgICAgICAgICAvL7OksLTV+8z1xsDC29Ky0qq7vcbwssu1pSBWNy450N64xMTayN2jur2rteO798rCvP7J6NbDtb24uFZpZXcKICAgICAgICAgICAgc2V0Vmlld09uTG9uZ0NsaWNrKGNuLCBkYXRhKTsKICAgICAgICAgICAgaWYgKGdldEhvc3QoKS5pc0lucHV0Qm94RW5hYmxlKCkpIHsKICAgICAgICAgICAgICAgIC8vtaW797vYuLQgVjcuOSDQ3rjExNrI3aO6vau147v3ysK8/sno1sO1vbi4VmlldwogICAgICAgICAgICAgICAgc2V0Vmlld09uQ2xpY2soY24sIGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKiogY3drILKlt8XE2rrL1No3Lja686OsytPGtbKlt8XKsWl0ZW2zpLC0ysK8/rvhyqfQp6OstvjX01ZpZXezpLC009DQp6Osz8i4/LjEyOfPwiBlbmQgKioqKioqKioqKioqKioqLwogICAgICAgICAgICAvLzcuOdDC1PYsyq631tbY0qqjrLGjtOa1pbv3aXRlbc671sOjrNTayb6z/cbAwtvKsaOsssXE3MXQts/Sqsm+s/21xMbAwtvKx7fx1Nqxu8m+s/21xMbAwtvWrsewCiAgICAgICAgICAgIGRhdGEuc2V0SXRlbVBvc2l0aW9uKHBvc2l0aW9uKTsKCiAgICAgICAgICAgIFZpZXcuT25DbGlja0xpc3RlbmVyIHVzZXJJbmZvQ2xpY2tMaXN0ZW5lciA9IG5ldyBWaWV3Lk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhWaWV3IHZpZXcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5pc1N0YXJQcmFpc2VNb2RlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgRmVlZENvbGxlY3Rpb25IZWxwZXIuSnVtcEZyb21JY29uQW5kTmFtZUZvckNvbW1lbnRzKG1Db250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZ2V0U3RhclVzZXJJbmZvRW50aXR5KCkuZ2V0VWlkKCksIFVzZXJJZGVudGl0eS5JREVOVElUWV9TVEFSLCAwKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBGZWVkQ29sbGVjdGlvbkhlbHBlci5KdW1wRnJvbUljb25BbmROYW1lRm9yQ29tbWVudHMobUNvbnRleHQsIGRhdGEuZ2V0VWlkKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5nZXRJZGVudGl0eSgpLCBkYXRhLmdldENvbnRlbnRpZCgpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb21tZW50SG9sZGVyLmljb24uc2V0T25DbGlja0xpc3RlbmVyKHVzZXJJbmZvQ2xpY2tMaXN0ZW5lcik7CiAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXRPbkNsaWNrTGlzdGVuZXIodXNlckluZm9DbGlja0xpc3RlbmVyKTsKCiAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuS09MLnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgaWYgKCFkYXRhLmlzU3RhclByYWlzZU1vZGUoKSkgewogICAgICAgICAgICAgICAgaWYgKGRhdGEuaXNNYXN0ZXIoKSAmJiBnZXRIb3N0KCkuc2hvd01hc3RlcigpKSB7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tYXN0ZXJJY29uLnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tYXN0ZXJJY29uLnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghZGF0YS5pc01hc3RlcigpICYmIGRhdGEuaXNBZG1pbmlzdHJhdG9yKCkpIHsKICAgICAgICAgICAgICAgICAgICAvL8jnufvKx7ncwO3UsdPDu6cKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmFkbWluSWNvbi5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuYWRtaW5JY29uLnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubWFzdGVySWNvbi5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmFkbWluSWNvbi5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFkYXRhLmlzTWFzdGVyKCkgJiYgIWRhdGEuaXNBZG1pbmlzdHJhdG9yKCkpIHsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmdldEtPTCgpID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLktPTC5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuS09MLnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKGRhdGEuaXNTdGFyUHJhaXNlTW9kZSgpICYmIGRhdGEuZ2V0U3RhclVzZXJJbmZvRW50aXR5KCkuZ2V0U3RhcktvbCgpID09IDEpKSB7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLktPTC5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vw/fQx823tPfQodDH0MejrNDo0qrU2mljb266zW1hc3Rlckljb27Wrrrz1NnJ6NbDCi8vICAgICAgICBpZiAoZGF0YS5nZXRJZGVudGl0eSgpID09IFVzZXJJZGVudGl0eS5JREVOVElUWV9TVEFSIHx8IGRhdGEuaXNTdGFyUHJhaXNlTW9kZSgpKSB7Ci8vICAgICAgICAgICAgLy/S/rLY1K3Nt8/xo6zP1Mq+w/fQx8z51r0KLy8gICAgICAgICAgICBjb21tZW50SG9sZGVyLnN0YXJJY29uLnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKLy8gICAgICAgIH0gZWxzZSB7Ci8vICAgICAgICAgICAgY29tbWVudEhvbGRlci5zdGFySWNvbi5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7Ci8vICAgICAgICB9CiAgICAgICAgICAgIGlmIChkYXRhLmlzU3RhclByYWlzZU1vZGUoKSAmJiAhVGV4dFV0aWxzLmlzRW1wdHkoZGF0YS5nZXRTdGFyVXNlckluZm9FbnRpdHkoKS5nZXRTdGFyUGVuZGFudCgpKSkgeyAgICAgICAvLy8vvqu7qsbAwtvVucq+udK8/gogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tQXZhdGFyRGVjb3JhdGUuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tQXZhdGFyRGVjb3JhdGUuc2V0SW1hZ2VVUkkoZGF0YS5nZXRTdGFyVXNlckluZm9FbnRpdHkoKS5nZXRTdGFyUGVuZGFudCgpKTsKICAgICAgICAgICAgfSBlbHNlIGlmICghVGV4dFV0aWxzLmlzRW1wdHkoZGF0YS5tUGVuZGFudFBpY3R1cmVVcmwpKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8gxtXNqMbAwtvVucq+udK8/gogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tQXZhdGFyRGVjb3JhdGUuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tQXZhdGFyRGVjb3JhdGUuc2V0SW1hZ2VVUkkoZGF0YS5tUGVuZGFudFBpY3R1cmVVcmwpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tQXZhdGFyRGVjb3JhdGUuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vw/fQx7Xj1N65psTcCiAgICAgICAgICAgIC8vw/fQx8bAwtu5psTcCiAgICAgICAgICAgIC8vIFY3LjkgYWRkIMbAwtvV37XEuPbIy9DFz6LD6Mr2CiAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXRFbmFibGVOYW1lQ29sb3IodHJ1ZSk7CiAgICAgICAgICAgIC8vVjcuOSBhZGQg1NrJ6NbDTmFtZc7EsLjWrsewo6zJ6NbDseq8x6OssrvIw7/YvP7J6NbD1+6087OktsgKLy8gICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXRFbmFibGVOYW1lV2lkdGgoZmFsc2UpOwoKICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLnNldFNob3dMZXZlbE5hbWUoZmFsc2UpOwogICAgICAgICAgICAvL8P30MfU3rn9tcTGwMLbsrvQ6NKqz9TKvrXIvLYKICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLnNldExldmVsSWNvbihkYXRhLmdldExldmVsKCksICFkYXRhLmlzU3RhclByYWlzZU1vZGUoKSAmJiAhZ2V0Q29uZmlnKCkuaGlkZUxldmVsKCksCiAgICAgICAgICAgICAgICAgICAgZGF0YS5nZXRMZXZlbE5hbWUoKSk7CiAgICAgICAgICAgIC8vVjcuOSBhZGQgyejWw05hbWXOxLC41+6089fWt/uzpLbIzqoxMAovLyAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLmdldFRleHRWaWV3KCkuc2V0RmlsdGVycyhuZXcgSW5wdXRGaWx0ZXJbXXtuZXcgSW5wdXRGaWx0ZXIuTGVuZ3RoRmlsdGVyKAovLyAgICAgICAgICAgICAgICAxMCl9KTsKICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLmdldFRleHRWaWV3KCkuc2V0TWF4RW1zKDEwKTsKICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLmdldFRleHRWaWV3KCkuc2V0RWxsaXBzaXplKFRleHRVdGlscy5UcnVuY2F0ZUF0LkVORCk7CiAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXROYW1lKGRhdGEuaXNTdGFyUHJhaXNlTW9kZSgpID8gZGF0YS5nZXRTdGFyVXNlckluZm9FbnRpdHkoKS5nZXRVbmFtZSgpCiAgICAgICAgICAgICAgICAgICAgOiBkYXRhLmdldFVuYW1lKCkpOwogICAgICAgICAgICBpbnQgcmVzaWQgPSBTdGFyQ2lyY2xlVXRpbHMuZ2V0UmVzQnlJbmRlbnRpdHkoZGF0YS5nZXRJZGVudGl0eSgpKTsKICAgICAgICAgICAgaWYgKGRhdGEuaXNTdGFyUHJhaXNlTW9kZSgpKSB7CiAgICAgICAgICAgICAgICByZXNpZCA9IFN0YXJDaXJjbGVVdGlscy5nZXRSZXNCeUluZGVudGl0eShVc2VySWRlbnRpdHkuSURFTlRJVFlfU1RBUik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlc2lkID4gMCkgewogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLnNldFN0YXJJY29uKG1Db250ZXh0LmdldFJlc291cmNlcygpLmdldERyYXdhYmxlKHJlc2lkKSwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLm5hbWUuc2V0U3Rhckljb24obnVsbCwgZmFsc2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGF0YS5pc1N0YXJQcmFpc2VNb2RlKCkpIHsKICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXRUZXh0Q29sb3IobUNvbnRleHQuZ2V0UmVzb3VyY2VzKCkuZ2V0Q29sb3IoCiAgICAgICAgICAgICAgICAgICAgICAgIFIuY29sb3IucHBfY29sb3JfZmY5NjAwKSwgZmFsc2UpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy88IS0tVjcuNiDKudPD08O7p+rHs8bH+LfWsrvNrMjP1qTA4NDNtcTTw7unIGxhbmdqaWFuQHFpeWkuY29tICBTVEFSVC0tPgogICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhLmdldElkZW50aXR5KCkpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIFVzZXJJZGVudGl0eS5JREVOVElUWV9TVEFSOi8vw/fQx8jP1qTTw7unCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXRUZXh0Q29sb3IobUNvbnRleHQuZ2V0UmVzb3VyY2VzKCkuZ2V0Q29sb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUi5jb2xvci5wcF9jb2xvcl9mZjk2MDApLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIC8vxuTL/MjP1qTTw7unCiAgICAgICAgICAgICAgICAgICAgY2FzZSBVc2VySWRlbnRpdHkuSURFTlRJVFlfT0ZGSUNBTDoKICAgICAgICAgICAgICAgICAgICBjYXNlIFVzZXJJZGVudGl0eS5JREVOVElUWV9BVVRIT1I6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBVc2VySWRlbnRpdHkuSURFTlRJVFlfQk9PS19BVVRIT1I6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBVc2VySWRlbnRpdHkuSURFTlRJVFlfVkVSSUZJTEVEOgogICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLm5hbWUuc2V0VGV4dENvbG9yKG1Db250ZXh0LmdldFJlc291cmNlcygpLmdldENvbG9yKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIuY29sb3IucHBfY29sb3Jfb2JiZTA2KSwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKLy+3x8jP1qTG1c2o08O7pwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLnNldFRleHRDb2xvcihtQ29udGV4dC5nZXRSZXNvdXJjZXMoKS5nZXRDb2xvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLmNvbG9yLnBwX2NvbG9yXzMzMzMzMyksIHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKCgogICAgICAgICAgICBpZihkYXRhLmdldE1lZGlhRW50aXR5KCkgIT0gbnVsbCkgewo=</text>
      </register>
      <register name="-" type="4">
        <text>null</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">cGFja2FnZSBjb20uaXFpeWkuZmVlZC51aS5hZGFwdGVyOwoKaW1wb3J0IGFuZHJvaWQuYXBwLkFjdGl2aXR5OwppbXBvcnQgYW5kcm9pZC5jb250ZW50LkNsaXBEYXRhOwppbXBvcnQgYW5kcm9pZC5jb250ZW50LkNsaXBib2FyZE1hbmFnZXI7CmltcG9ydCBhbmRyb2lkLmNvbnRlbnQuQ29udGV4dDsKaW1wb3J0IGFuZHJvaWQuY29udGVudC5JbnRlbnQ7CmltcG9ydCBhbmRyb2lkLnN1cHBvcnQudjcud2lkZ2V0LlJlY3ljbGVyVmlldzsKaW1wb3J0IGFuZHJvaWQudGV4dC5TcGFubmFibGVTdHJpbmc7CmltcG9ydCBhbmRyb2lkLnRleHQuU3Bhbm5lZDsKaW1wb3J0IGFuZHJvaWQudGV4dC5UZXh0VXRpbHM7CmltcG9ydCBhbmRyb2lkLnRleHQuc3R5bGUuRm9yZWdyb3VuZENvbG9yU3BhbjsKaW1wb3J0IGFuZHJvaWQudmlldy5MYXlvdXRJbmZsYXRlcjsKaW1wb3J0IGFuZHJvaWQudmlldy5WaWV3OwppbXBvcnQgYW5kcm9pZC52aWV3LlZpZXdHcm91cDsKaW1wb3J0IGFuZHJvaWQud2lkZ2V0LkFic0xpc3RWaWV3OwppbXBvcnQgYW5kcm9pZC53aWRnZXQuQWRhcHRlclZpZXc7CmltcG9ydCBhbmRyb2lkLndpZGdldC5JbWFnZVZpZXc7CmltcG9ydCBhbmRyb2lkLndpZGdldC5MaW5lYXJMYXlvdXQ7CmltcG9ydCBhbmRyb2lkLndpZGdldC5UZXh0VmlldzsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLmNvbW1vbi5oZWxwZXIuQ29tbWVudEZlZWRIb3N0OwppbXBvcnQgY29tLmlxaXlpLmZlZWQuZW50aXR5LkNvbW1lbnRFbnRpdHk7CmltcG9ydCBjb20uaXFpeWkuZmVlZC5odHRwLkRlbGV0ZUNvbW1lbnRSZXF1ZXN0OwppbXBvcnQgY29tLmlxaXlpLmZlZWQudWkuaW50ZXJmYWNlcy5JQ29tbWVudEhvc3Q7CmltcG9ydCBjb20uaXFpeWkuZmVlZC5SOwppbXBvcnQgY29tLmlxaXlpLmZlZWQuY29tbW9uLmNvbW11bmljYXRpb24uRmVlZENvbGxlY3Rpb25IZWxwZXI7CmltcG9ydCBjb20uaXFpeWkuZmVlZC5lbnRpdHkuQ2hhbmdlZERhdGFPZkNvbW1lbnRzOwppbXBvcnQgY29tLmlxaXlpLmZlZWQudWkuYWN0aXZpdHkuSG90Q29tbWVudHNBY3Rpdml0eTsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLnVpLmZyYWdtZW50LkZlZWREZXRhaWxGcmFnbWVudDsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLnVpLmhvbGRlci5Db21tZW50SG9sZGVyOwppbXBvcnQgY29tLmlxaXlpLmZlZWQudWkubW9kZWwuQ29tbWVudERhdGFTb3VyY2U7CmltcG9ydCBjb20uaXFpeWkuZmVlZC51aS5tb2RlbC5Db21tZW50UmVwb3NpdG9yeTsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uY29uc3RhbnRzLklGZWVkRGV0YWlsQ29tbWVudHNDb25zOwppbXBvcnQgY29tLmlxaXlpLmZlZWQudWkuaG9sZGVyLkNvbW1lbnRzQ29uZmlndXJhdGlvbjsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLmh0dHAuRGVsZXRlQ29tbWVudFJlcXVlc3Q7CmltcG9ydCBjb20uaXFpeWkuZmVlZC51aS5tb2RlbC5Db21tZW50c01vZGVsOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5jb25zdGFudHMuSVZpZXdIb2xkZXJDaXJjbGVDb25zdDsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uZmVlZGNvbGxlY3Rpb24uY29tbXVuaWNhdGlvbi5GZWVkSnVtcGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLlN0cmluZ1V0aWxzOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLmFwcC5QUENvbW1vbkFwcDsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi5jb25zdGFudHMuRGF0YUNvbnN0OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLmVudGl0eS5ldmVudGJ1cy5NYWluVGhyZWFkRXZlbnQ7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24uaHR0cC5BZ3JlZUNvbW1lbnRSZXF1ZXN0OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnN0YXQuUGluZ2JhY2s7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udWkuaGVscGVyLkNvbW1vbkZlZWRDb250ZW50SGVscGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnVpLmhlbHBlci5QUENvbW1vblJOSGVscGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnVpLnZpZXcuZGlhbG9nLkNvbmZpcm1EaWFsb2c7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udWkudmlldy5wdHIuQ29tbW9uUHRyUmVjeWNsZXJWaWV3OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLkNvbGxlY3Rpb25VdGlsczsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51dGlscy5GZWVkQ29tbW9uSGVscGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLlBQVG9vbHM7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmNvbnN0YW50cy5JbnRlbnRDb25zdDsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLmVudGl0eS5Db21tZW50RW50aXR5OwppbXBvcnQgY29tLmlxaXlpLmZlZWQuY29tbW9uLmhlbHBlci5Db21tZW50RmVlZEhvc3Q7CmltcG9ydCBjb20uaXFpeWkuZmVlZC5jb21tb24uaGVscGVyLkNvbW1lbnRzSGVscGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLmh0dHAuQWdyZWVDb21tZW50UmVxdWVzdDsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLnVpLmludGVyZmFjZXMuSUNvbW1lbnRDYWxsQmFjazsKaW1wb3J0IGNvbS5pcWl5aS5mZWVkLnVpLmludGVyZmFjZXMuSUNvbW1lbnRIb3N0OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnN0YXQuSVBpbmdiYWNrUGFnZTsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi5zdGF0LlBpbmdiYWNrOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnN0YXQuUGluZ2JhY2tQYXJhbTsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51aS5oZWxwZXIuQ29tbW9uRmVlZENvbnRlbnRIZWxwZXI7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udWkudmlldy5kaWFsb2cuQ29uZmlybURpYWxvZzsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51aS52aWV3LmRpYWxvZy5NZW51RGlhbG9nOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnVpLnZpZXcubG9hZGluZ3ZpZXcuTG9hZGluZ1Jlc3VsdFBhZ2U7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udWkudmlldy5wdHIuQ29tbW9uUHRyUmVjeWNsZXJWaWV3OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLkNvbGxlY3Rpb25VdGlsczsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51dGlscy5FdmVudEJ1c0NvbmZpZzsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51dGlscy5GZWVkQ29tbW9uSGVscGVyOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLkxpbmtNb3ZlbWVudE1ldGhvZE92ZXJyaWRlOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLlBQTG9nOwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5saWIuY29tbW9uLnV0aWxzLlBQVG9vbHM7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udXRpbHMuU2FtcGxlQ2xpY2thYmxlU3BhbjsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8ubGliLmNvbW1vbi51dGlscy5WaWV3VXRpbHM7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLmxpYi5jb21tb24udXRpbHMudG9hc3RzLlBhb1Bhb1RpcHM7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLnF5Y29tcG9uZW50LmVtb3Rpb24udXRpbHMuRW1vdGlvbkVkaXRVdGlsczsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uc3RhcndhbGwuZW50aXR5LkF1ZGlvRW50aXR5OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5zdGFyd2FsbC5lbnRpdHkuRmVlZERldGFpbEVudGl0eTsKaW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uc3RhcndhbGwuZW50aXR5Lk1lZGlhRW50aXR5OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5zdGFyd2FsbC5lbnRpdHkuVXNlcklkZW50aXR5OwppbXBvcnQgY29tLmlxaXlpLnBhb3Bhby5zdGFyd2FsbC51dGlscy5TdGFyQ2lyY2xlVXRpbHM7CmltcG9ydCBjb20uaXFpeWkucGFvcGFvLnVzZXIuQ29tbW9uVXNlckluZm9VdGlsczsKCmltcG9ydCBvcmcuZ3JlZW5yb2JvdC5ldmVudGJ1cy5FdmVudEJ1czsKaW1wb3J0IG9yZy5xaXlpLmJhc2Vjb3JlLnV0aWxzLlVJVXRpbHM7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKCgovKioKICogZmVlZM/qx+nSs8/CtcTGwMLbwdCx7QogKiDV4rj2wOC1xNaw1PDKx8bAwtvB0LHtTGlzdFZpZXe1xM/Uyr4KICogZmVlZM/qx+nSs7XExNrI3bK71Nm6zdXiuPZMaXN0Vmlld/Huus8KICoKICogtMvA4LrNzeKyv7XE8e66z73PzqrRz9bYCiAqCiAqIENyZWF0ZWQgYnkgRnJpZGdlIG9uIDE2LzcvMjcuCiAqLwovL3RvZG86vMzQ+HZpZXey47rNcHJlc2VudGVysuO1xLfWwOsKcHVibGljIGNsYXNzIENvbW1lbnRzTGlzdFByZXNlbnRlciBpbXBsZW1lbnRzIElGZWVkRGV0YWlsQ29tbWVudHNDb25zewogICAgcHJpdmF0ZSBmaW5hbCBDb21tZW50c0FkYXB0ZXIgYWRhcHRlciA9IG5ldyBDb21tZW50c0FkYXB0ZXIoKTsKICAgIHByaXZhdGUgQ29tbWVudHNDb25maWd1cmF0aW9uIGNvbmZpZzsKICAgIHByaXZhdGUgUmVjeWNsZXJWaWV3LkFkYXB0ZXJEYXRhT2JzZXJ2ZXIgbU9ic2VydmVyPW5ldyBSZWN5Y2xlclZpZXcuQWRhcHRlckRhdGFPYnNlcnZlcigpIHsKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBvbkNoYW5nZWQoKSB7CiAgICAgICAgICAgIHN1cGVyLm9uQ2hhbmdlZCgpOwogICAgICAgICAgICBtTGlzdFZpZXcucG9zdChuZXcgUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICBzZXRFbXB0eVZpZXdWaXNpYmxlKCFtTW9kZWwuaGFzQ29tbWVudHMoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CgoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBUQUcgPSAiRmVlZENvbW1lbnREZXRhaWxBZGFwdGVyIjsKCiAgICBwcml2YXRlIGJvb2xlYW4gb25seUhvdCA9IGZhbHNlOwoKICAgIC8vQ29udGV4dAogICAgcHJpdmF0ZSBDb250ZXh0IG1Db250ZXh0OwoKCiAgICAvL8/gudi72LX3Y2FsbGJhY2sKICAgIHByaXZhdGUgSUNvbW1lbnRDYWxsQmFjayBjb21tZW50Q2FsbGJhY2s7CgoKICAgIHByaXZhdGUgQ29tbWVudEVudGl0eSBvcENvbW1lbnRFbnRpdHk7Ly8vLyCxu7LZ1/e1xMbAwtsKCiAgICBwcml2YXRlIENvbW1lbnRzTW9kZWwgbU1vZGVsID0gbmV3IENvbW1lbnRzTW9kZWwoKTsKICAgIC8vVUnP4LnYCiAgICBwcml2YXRlIENvbW1vblB0clJlY3ljbGVyVmlldyBtTGlzdFZpZXc7CiAgICBwcml2YXRlIExvYWRpbmdSZXN1bHRQYWdlIG5vQ29tbWVudHNWaWV3OyAvL8bAwtvOqr/VyrGjrMbAwtvH+M/Uyr61xNKzw+YKCiAgICBwcml2YXRlIGJvb2xlYW4gaXNMb2FkaW5nOwogICAgLy8gcGluZ2JhY2vP4LnYCiAgICBwcml2YXRlIGludCBtV2hpdGNoRnJvbVBhZ2U7CiAgICBwcml2YXRlIElQaW5nYmFja1BhZ2UgcnBhZ2U7CiAgICBwcml2YXRlIENvbW1lbnRSZXBvc2l0b3J5IGNvbW1lbnRSZXBvc2l0b3J5OwoKCiAgICBwdWJsaWMgYm9vbGVhbiBpc09ubHlIb3QoKSB7CiAgICAgICAgcmV0dXJuIGdldENvbmZpZygpLmlzT25seUhvdCgpOwogICAgfQoKICAgIHB1YmxpYyBDb21tZW50c0xpc3RQcmVzZW50ZXIoSUNvbW1lbnRIb3N0IGhvc3QsIENvbnRleHQgbUNvbnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbW1vblB0clJlY3ljbGVyVmlldyBtTGlzdFZpZXcsIElDb21tZW50Q2FsbEJhY2sgSUNvbW1lbnRDYWxsYmFjaywgTG9hZGluZ1Jlc3VsdFBhZ2Ugbm9Db21tZW50c1ZpZXcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElQaW5nYmFja1BhZ2UgcGluZ2JhY2tQYWdlLCBpbnQgd2hpdGNoRnJvbVBhZ2UsIENvbW1lbnRzQ29uZmlndXJhdGlvbiBjb25maWd1cmF0aW9uLCBDb21tZW50UmVwb3NpdG9yeSBjb21tZW50UmVwb3NpdG9yeSkgewogICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlndXJhdGlvbjsKICAgICAgICB0aGlzLm1Db250ZXh0ID0gbUNvbnRleHQ7CiAgICAgICAgdGhpcy5tTGlzdFZpZXcgPSBtTGlzdFZpZXc7CiAgICAgICAgdGhpcy5jb21tZW50Q2FsbGJhY2sgPSBJQ29tbWVudENhbGxiYWNrOwogICAgICAgIHRoaXMubm9Db21tZW50c1ZpZXcgPSBub0NvbW1lbnRzVmlldzsKICAgICAgICB0aGlzLnJwYWdlID0gcGluZ2JhY2tQYWdlOwogICAgICAgIHRoaXMubVdoaXRjaEZyb21QYWdlID0gd2hpdGNoRnJvbVBhZ2U7CiAgICAgICAgdGhpcy5jb21tZW50UmVwb3NpdG9yeSA9IGNvbW1lbnRSZXBvc2l0b3J5OwogICAgICAgIGluaXQobUxpc3RWaWV3KTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgaW5pdChDb21tb25QdHJSZWN5Y2xlclZpZXcgbUxpc3RWaWV3KSB7CiAgICAgICAgYWRhcHRlci5yZWdpc3RlckFkYXB0ZXJEYXRhT2JzZXJ2ZXIobU9ic2VydmVyKTsKICAgICAgICBtTGlzdFZpZXcuc2V0QWRhcHRlcihhZGFwdGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIMfrx/PGwMLbvdO/2rrNyb6z/cbAwtu907/auvO1xLLZ1/cKICAgICAqCiAgICAgKiBAcGFyYW0gaGFzTW9yZSDKx7fx09DPwtK70rMKICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIG9uTW9yZUxvYWRlZChib29sZWFuIGhhc01vcmUpIHsKICAgICAgICBpZiAoIWhhc01vcmUpIHsKICAgICAgICAgICAgaWYgKGFkYXB0ZXIuZ2V0SXRlbUNvdW50KCkgPT0gMCkgewogICAgICAgICAgICAgICAgbUxpc3RWaWV3LnN0b3AoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG1MaXN0Vmlldy5sb2FkTW9yZUNvbXBsZXRlKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1MaXN0Vmlldy5sb2FkTW9yZUNvbXBsZXRlKHRydWUpOwogICAgICAgIH0KICAgICAgICBpc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICBhZGFwdGVyLm5vdGlmeURhdGFTZXRDaGFuZ2VkKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHNldEVtcHR5Vmlld1Zpc2libGUoYm9vbGVhbiB2aXNpYmxlKSB7CiAgICAgICAgaWYgKHZpc2libGUpIHsKICAgICAgICAgICAgbUxpc3RWaWV3LnNldFB1bGxMb2FkRW5hYmxlKGZhbHNlKTsKICAgICAgICAgICAgaWYgKGdldENvbmZpZygpLmlzSW5kZXBlbmRlbnQoKSkgewogICAgICAgICAgICAgICAgbUxpc3RWaWV3LnNldFB1bGxSZWZyZXNoRW5hYmxlKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBub0NvbW1lbnRzVmlldy5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CgogICAgICAgICAgICAvLyDQocPXyta7+snPu+GxqENsYXNzQ2FzdEV4Y2VwdGlvbqOsy7XD97TLyrHDu7zTuf2jrMTHvs2yu9Do0qrJvgogICAgICAgICAgICAvLyC199PDuf1zZXRBZGFwdGVyu/LV32FkZEZvb3RlclZpZXe2vLK7u+GxqLjDtO3O8wovLyAgICAgICAgICAgIHRyeSB7Ci8vICAgICAgICAgICAgICAgIG1MaXN0Vmlldy5yZW1vdmVGb290ZXJWaWV3KG5vQ29tbWVudHNWaWV3KTsKLy8gICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewovLwovLyAgICAgICAgICAgIH0KICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqINPJ09rOtNaqtcTUrdLyo6zU2m5vdGlmebXEyrG68siluPh2aWV3yejWw9DCTGF5b3V0UGFyYW1z0v3G8MHLscDAo6O6CiAgICAgICAgICAgICAqIGphdmEubGFuZy5OdWxsUG9pbnRlckV4Y2VwdGlvbjoKICAgICAgICAgICAgICogQXR0ZW1wdCB0byBpbnZva2UgdmlydHVhbCBtZXRob2QgJ2Jvb2xlYW4gYW5kcm9pZC5zdXBwb3J0LnY3LndpZGdldC5SZWN5Y2xlclZpZXckVmlld0hvbGRlci5zaG91bGRJZ25vcmUoKScgb24gYSBudWxsIG9iamVjdCByZWZlcmVuY2UKICAgICAgICAgICAgICogy/nS1NTa0tG+rdPQTGF5b3V0UGFyYW1ztcTKsbryo6zQ3rjEy/wKICAgICAgICAgICAgICovCiAgICAgICAgICAgIFJlY3ljbGVyVmlldy5MYXlvdXRQYXJhbXMgZm9vdFBhcmFtcyA9IG51bGw7CiAgICAgICAgICAgIGlmIChub0NvbW1lbnRzVmlldy5nZXRMYXlvdXRQYXJhbXMoKT09bnVsbCkgewogICAgICAgICAgICAgICAgIGZvb3RQYXJhbXMgPSBuZXcgUmVjeWNsZXJWaWV3LkxheW91dFBhcmFtcygKICAgICAgICAgICAgICAgICAgICAgICAgVmlld0dyb3VwLkxheW91dFBhcmFtcy5NQVRDSF9QQVJFTlQsCiAgICAgICAgICAgICAgICAgICAgICAgIGdldENvbmZpZygpLmlzSW5kZXBlbmRlbnQoKSA/IG1MaXN0Vmlldy5nZXRIZWlnaHQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogVmlld0dyb3VwLkxheW91dFBhcmFtcy5XUkFQX0NPTlRFTlQpOwogICAgICAgICAgICB9ZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBmb290UGFyYW1zID0gKFJlY3ljbGVyVmlldy5MYXlvdXRQYXJhbXMpIG5vQ29tbWVudHNWaWV3LmdldExheW91dFBhcmFtcygpOwogICAgICAgICAgICAgICAgZm9vdFBhcmFtcy5oZWlnaHQgPSBnZXRDb25maWcoKS5pc0luZGVwZW5kZW50KCkgPyBtTGlzdFZpZXcuZ2V0SGVpZ2h0KCkKICAgICAgICAgICAgICAgICAgICAgICAgOiBWaWV3R3JvdXAuTGF5b3V0UGFyYW1zLldSQVBfQ09OVEVOVDsKICAgICAgICAgICAgfQogICAgICAgICAgICBub0NvbW1lbnRzVmlldy5zZXRMYXlvdXRQYXJhbXMoZm9vdFBhcmFtcyk7CiAgICAgICAgICAgIG1MaXN0Vmlldy5hZGRGb290ZXJWaWV3KG5vQ29tbWVudHNWaWV3KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtTGlzdFZpZXcuc2V0UHVsbExvYWRFbmFibGUodHJ1ZSk7CiAgICAgICAgICAgIG1MaXN0Vmlldy5zZXRQdWxsUmVmcmVzaEVuYWJsZSh0cnVlKTsKICAgICAgICAgICAgbUxpc3RWaWV3LnJlbW92ZUZvb3RlclZpZXcobm9Db21tZW50c1ZpZXcpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBub3RpZnlEYXRhU2V0Q2hhbmdlZCgpewogICAgICAgIGFkYXB0ZXIubm90aWZ5RGF0YVNldENoYW5nZWQoKTsKICAgIH0KICAgIC8qKgogICAgICog1tjQwrzT1NjGwMLbCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlbG9hZENvbW1lbnRzKCkgewogICAgICAgIHJlbG9hZENvbW1lbnRzKG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICog1tjQwrzT1NjGwMLbCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlbG9hZENvbW1lbnRzKEZlZWREZXRhaWxGcmFnbWVudC5Db21tZW50c0RhdGFDaGFuZ2VkTGlzdGVuZXIgcmVsb2FkRmluaXNoTGlzdGVuZXIpIHsKICAgICAgICBsb2FkQ29tbWVudHMocmVsb2FkRmluaXNoTGlzdGVuZXIsIHRydWUpOy8vW3N0YXJ0IGZyb20gZmlyc3RdCiAgICB9CgogICAgLyoqCiAgICAgKiC809TYuPy24MbAwtsKICAgICAqLwogICAgcHVibGljIHZvaWQgbG9hZE1vcmUoKSB7CiAgICAgICAgbG9hZENvbW1lbnRzKG51bGwsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAqILvxyKHGwMLbwdCx7QogICAgICoKICAgICAqIEBwYXJhbSByZWxvYWRGaW5pc2hMaXN0ZW5lcgogICAgICogQHBhcmFtIHJlZnJlc2gKICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGxvYWRDb21tZW50cyhmaW5hbCBGZWVkRGV0YWlsRnJhZ21lbnQuQ29tbWVudHNEYXRhQ2hhbmdlZExpc3RlbmVyIHJlbG9hZEZpbmlzaExpc3RlbmVyLCBmaW5hbCBib29sZWFuIHJlZnJlc2gpIHsKCgogICAgICAgIGlzTG9hZGluZyA9IHRydWU7CiAgICAgICAgY29tbWVudFJlcG9zaXRvcnkubG9hZENvbW1lbnRzKG5ldyBDb21tZW50RGF0YVNvdXJjZS5Mb2FkQ29tbWVudHNDYWxsQmFjaygpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ29tbWVudHNMb2FkZWQoQ29tbWVudHNNb2RlbCBtb2RlbCkgewogICAgICAgICAgICAgICAgbU1vZGVsID0gbW9kZWw7CiAgICAgICAgICAgICAgICBpZiAocmVsb2FkRmluaXNoTGlzdGVuZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJlbG9hZEZpbmlzaExpc3RlbmVyLm9uU3VjY2Vzcyhtb2RlbCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy+x5Lj8wdCx7SwgZmVlZCyyos2o1qpVSbHku68KICAgICAgICAgICAgICAgIE1haW5UaHJlYWRFdmVudCBldmVudCA9IG5ldyBNYWluVGhyZWFkRXZlbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzQ29uZmlnLkZFRURfR0VUX0NPTU1ORVRfU1VDQ0VTUywgbnVsbCk7CiAgICAgICAgICAgICAgICBFdmVudEJ1cy5nZXREZWZhdWx0KCkucG9zdChldmVudCk7CiAgICAgICAgICAgICAgICBvbk1vcmVMb2FkZWQobW9kZWwuaXNIYXNNb3JlKCkpOwogICAgICAgICAgICAgICAgY29tbWVudENhbGxiYWNrLm9uUmVsb2FkU3VjY2VzcygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25EYXRhTm90QXZhaWxhYmxlKGJvb2xlYW4gaGFzTW9yZSkgewogICAgICAgICAgICAgICAgLy90b2RvINXiwO/Q6NKqsuLK1AogICAgICAgICAgICAgICAgaWYgKGFkYXB0ZXIuZ2V0SXRlbUNvdW50KCkgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIG9uTW9yZUxvYWRlZChoYXNNb3JlKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIG1MaXN0Vmlldy5sb2FkTW9yZUZhaWxlZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29tbWVudENhbGxiYWNrLm9uR2V0RXJyb3IoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIHJlZnJlc2gpOwogICAgfQoKICAgIHByaXZhdGUgTGlzdDxDb21tZW50RW50aXR5PiBnZXRDb21tZW50TGlzdCgpIHsKICAgICAgICByZXR1cm4gbU1vZGVsLmdldENvbW1lbnRzTGlzdCgpOwogICAgfQoKICAgIHB1YmxpYyBsb25nIGdldEhvdENvbW1lbnRUb3RhbENvdW50KCkgewogICAgICAgIHJldHVybiBtTW9kZWwuZ2V0VG90YWxIb3RDb21tZW50c0NvdW50KCk7CiAgICB9CgogICAgcHVibGljIGludCBnZXRIb3RDb21tZW50Q3VycmVudENvdW50KCkgewogICAgICAgIHJldHVybiBtTW9kZWwuZ2V0Q3VycmVudEhvdENvbW1lbnRDb3VudCgpOwogICAgfQoKCiAgICBwdWJsaWMgdm9pZCBzaG93Q29tbWVudE9wZXJhdGlvbkRsZyhmaW5hbCBDb21tZW50RW50aXR5IGNvbW1lbnRFbnRpdHkpIHsKCiAgICAgICAgb3BDb21tZW50RW50aXR5ID0gY29tbWVudEVudGl0eTsKCgogICAgICAgIEFycmF5TGlzdDxNZW51RGlhbG9nLk1lbnVJdGVtPiBvcHRpb25zUGFyYW1zID0gbmV3IEFycmF5TGlzdDw+KCk7CgogICAgICAgIC8vIMj0ysfX1Ly6t6KyvLXExsDC2ywg1PIgIr7ZsagiILmmxNyyu8K2s/YKICAgICAgICBpZiAoIWNvbW1lbnRFbnRpdHkuZ2V0SXNPd25lcigpKSB7CiAgICAgICAgICAgIE1lbnVEaWFsb2cuTWVudUl0ZW0gcmVwb3J0SXRlbSA9IG5ldyBNZW51RGlhbG9nLk1lbnVJdGVtKCk7CiAgICAgICAgICAgIHJlcG9ydEl0ZW0uc2V0VGl0bGUobUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnBwX2NpcmNsZV9mZWVkX2NvbW1lbnRfb3BfcmVwb3J0KSk7CiAgICAgICAgICAgIHJlcG9ydEl0ZW0uc2V0T25DbGlja0xpc3RlbmVyKAogICAgICAgICAgICAgICAgICAgIG5ldyBWaWV3Lk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soVmlldyB2aWV3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnRlbnQgaSA9IG5ldyBJbnRlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkucHV0RXh0cmEoSW50ZW50Q29uc3QuVVNFUl9JRF9LRVksIG9wQ29tbWVudEVudGl0eS5nZXRVaWQoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1dEV4dHJhKEludGVudENvbnN0LlNPVVJDRV9UWVBFX0tFWSwgRGF0YUNvbnN0LkZST01fQ09NTUVOVCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1dEV4dHJhKEludGVudENvbnN0LkNPTU1FTlRfSURfS0VZLCBvcENvbW1lbnRFbnRpdHkuZ2V0Q29udGVudGlkKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgSUNvbW1lbnRIb3N0IGhvc3QgPSBnZXRIb3N0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1dEV4dHJhKEludGVudENvbnN0LkNPTU1FTlRfSE9TVF9UWVBFLCBob3N0LmdldFR5cGUoKS5nZXRWYWx1ZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob3N0IGluc3RhbmNlb2YgQ29tbWVudEZlZWRIb3N0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmVlZERldGFpbEVudGl0eSBmZWVkID0gKChDb21tZW50RmVlZEhvc3QpIGhvc3QpLmdldEZlZWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1dEV4dHJhKEludGVudENvbnN0LkZFRURfVUlEX0tFWSwgZmVlZC5nZXRVaWQoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQUENvbW1vblJOSGVscGVyLnN0YXJ0UmVwb3J0UmVhY3RBY3Rpdml0eSgoQWN0aXZpdHkpIG1Db250ZXh0LCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvcHRpb25zUGFyYW1zLmFkZChyZXBvcnRJdGVtKTsKICAgICAgICB9CgogICAgICAgIGlmIChnZXRIb3N0KCkuY2FuRGVsZXRlKGNvbW1lbnRFbnRpdHkpKSB7CiAgICAgICAgICAgIE1lbnVEaWFsb2cuTWVudUl0ZW0gZGVsZXRlSXRlbSA9IG5ldyBNZW51RGlhbG9nLk1lbnVJdGVtKCk7CiAgICAgICAgICAgIGRlbGV0ZUl0ZW0uc2V0VGl0bGUobUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnBwX2NpcmNsZV9mZWVkX2NvbW1lbnRfb3BfZGVsZXRlKSk7CiAgICAgICAgICAgIGRlbGV0ZUl0ZW0uc2V0T25DbGlja0xpc3RlbmVyKAogICAgICAgICAgICAgICAgICAgIG5ldyBWaWV3Lk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soVmlldyB2aWV3KSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gw/fQx7eisrzGwMLb1rvT0NfUvLrE3Mm+s/0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29tbWVudEVudGl0eS5nZXRJc093bmVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgY29tbWVudEVudGl0eS5nZXRJZGVudGl0eSgpID09IFVzZXJJZGVudGl0eS5JREVOVElUWV9TVEFSKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFvUGFvVGlwcy5zaG93RGVmYXVsdFRvYXN0KG1Db250ZXh0LCBtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfZGVsX3N0YXJfY29tbWVudF9hbGVydCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgdGl0bGUgPSBtQ29udGV4dC5nZXRTdHJpbmcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIuc3RyaW5nLnBwX2NpcmNsZV9mZWVkX2NvbW1lbnRfb3BfZGVsZXRlX2NvbmZpcm0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nW10gaXRlbXMgPSBuZXcgU3RyaW5nW117CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIKGwyKHP+6GxILC0xaUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnBwX3NxdWFyZV9zZWFyY2hfY2FuY2VsKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gobDIt7aoobGwtMWlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1Db250ZXh0LmdldFN0cmluZyhSLnN0cmluZy5wcF9zcXVhcmVfc2VhcmNoX2NvbmZpcm0pfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDb25maXJtRGlhbG9nLkJ1aWxkZXIoKS5zZXREZXNjcmlwdGlvbih0aXRsZSkuc2V0QnV0dG9uSXRlbXMoaXRlbXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDb25maXJtTGlzdGVuZXIobmV3IENvbmZpcm1EaWFsb2cuT25Db25maXJtTGlzdGVuZXIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soQ29udGV4dCBjb250ZXh0LCBpbnQgd2hpY2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHdoaWNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIM34wufT0LTtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUFBUb29scy5nZXROZXR3b3JrU3RhdHVzKG1Db250ZXh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PSBQUFRvb2xzLklOVkFMSURfU1RBVEUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW9QYW9UaXBzLnNob3dEZWZhdWx0KG1Db250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbUNvbnRleHQuZ2V0UmVzb3VyY2VzKCkuZ2V0U3RyaW5nKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLnN0cmluZy5wcF9uZXR3b3JrX2ZhaWxfdGlwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gyb6z/dbQvfi2yM28seoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhb1Bhb1RpcHMuc2hvd1NtYWxsTG9hZGluZ0RpYWxvZygoQWN0aXZpdHkpIG1Db250ZXh0LCBtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfZGVsZXRpbmcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vILm51OzJvrP9x+vH83VybAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRSZXBvc2l0b3J5LmRlbGV0ZUNvbW1lbnQob3BDb21tZW50RW50aXR5LCBuZXcgRGVsZXRlQ29tbWVudFJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLkRlbGV0ZUNtdExpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uU3VjY2VzcygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbW1lbnRFbnRpdHkgY29tbWVudEVudGl0eSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL7PJuabJvrP9o6zNrLK9sb612Mr9vt294bm5o6yyosfSzajWqrj80MJVSQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLm5vdGlmeURhdGFTZXRDaGFuZ2VkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRDYWxsYmFjay5vbkNvbW1lbnREZWxldGVkKGNvbW1lbnRFbnRpdHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW9QYW9UaXBzLnNob3dTdWNjZXNzSW1hZ2VUb2FzdChtQ29udGV4dCwgbUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnBwX2RlbGV0ZWQpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkVycm9yKGludCBjb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIMm+s/3Kp7Dco6zP1Mq+yb6z/bTtzvPQxc+iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhb1Bhb1RpcHMuc2hvd0ZhaWxlZEltYWdlVG9hc3QobUNvbnRleHQsIG1Db250ZXh0LmdldFN0cmluZyhSLnN0cmluZy5wcF90b2FzdF9kZWxldGVfZmVlZF9yZWFzb25fZmFpbCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNob3cobUNvbnRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG9wdGlvbnNQYXJhbXMuYWRkKGRlbGV0ZUl0ZW0pOwogICAgICAgIH0KCiAgICAgICAgLy/T79L0xsDC29L+sti4tNbGsLTFpQogICAgICAgIGlmIChjb21tZW50RW50aXR5LmdldEF1ZGlvRW50aXR5KCkgPT0gbnVsbCkgewogICAgICAgICAgICBNZW51RGlhbG9nLk1lbnVJdGVtIGNvcHlJdGVtID0gbmV3IE1lbnVEaWFsb2cuTWVudUl0ZW0oKTsKICAgICAgICAgICAgY29weUl0ZW0uc2V0VGl0bGUobUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnBwX2NpcmNsZV9mZWVkX2NvbW1lbnRfb3BfY29weSkpOwogICAgICAgICAgICBjb3B5SXRlbS5zZXRPbkNsaWNrTGlzdGVuZXIoCiAgICAgICAgICAgICAgICAgICAgbmV3IFZpZXcuT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhWaWV3IHZpZXcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENsaXBib2FyZE1hbmFnZXIgY21iID0gKENsaXBib2FyZE1hbmFnZXIpIG1Db250ZXh0LmdldFN5c3RlbVNlcnZpY2UoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRleHQuQ0xJUEJPQVJEX1NFUlZJQ0UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY21iLnNldFByaW1hcnlDbGlwKENsaXBEYXRhLm5ld1BsYWluVGV4dChudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcENvbW1lbnRFbnRpdHkuZ2V0Q29udGVudCgpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYW9QYW9UaXBzLnNob3dEZWZhdWx0KG1Db250ZXh0LCBtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfaGFzX2NvcGllZCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG9wdGlvbnNQYXJhbXMuYWRkKGNvcHlJdGVtKTsKICAgICAgICB9CgogICAgICAgIGlmICghKGNvbW1lbnRFbnRpdHkuZ2V0SXNPd25lcigpIHx8ICFnZXRIb3N0KCkuaXNJbnB1dEJveEVuYWJsZSgpKSkgewogICAgICAgICAgICBNZW51RGlhbG9nLk1lbnVJdGVtIHJlcGx5SXRlbSA9IG5ldyBNZW51RGlhbG9nLk1lbnVJdGVtKCk7CiAgICAgICAgICAgIHJlcGx5SXRlbS5zZXRUaXRsZShtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9vcF9yZXBseSkpOwogICAgICAgICAgICByZXBseUl0ZW0uc2V0T25DbGlja0xpc3RlbmVyKAogICAgICAgICAgICAgICAgICAgIG5ldyBWaWV3Lk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soVmlldyB2aWV3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50Q2FsbGJhY2sub25SZXBseUNvbW1lbnQob3BDb21tZW50RW50aXR5KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvcHRpb25zUGFyYW1zLmFkZChyZXBseUl0ZW0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGdldEhvc3QoKS5jYW5TaHV0VXAoY29tbWVudEVudGl0eSkpIHsKICAgICAgICAgICAgTWVudURpYWxvZy5NZW51SXRlbSBzaHV0VXBJdGVtID0gbmV3IE1lbnVEaWFsb2cuTWVudUl0ZW0oKTsKICAgICAgICAgICAgaWYgKG9wQ29tbWVudEVudGl0eS5pc1VzZXJTaHV0VXAoKSkgewogICAgICAgICAgICAgICAgc2h1dFVwSXRlbS5zZXRUaXRsZShtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9vcF9zaHV0X3VwX2NhbmNlbCkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2h1dFVwSXRlbS5zZXRUaXRsZShtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9vcF9zaHV0X3VwKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNodXRVcEl0ZW0uc2V0T25DbGlja0xpc3RlbmVyKG5ldyBWaWV3Lk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhWaWV3IHYpIHsKICAgICAgICAgICAgICAgICAgICBuZXcgUGluZ2JhY2soKS5zZXRUKFBpbmdiYWNrUGFyYW0uVFlQRV9DTElDSykuc2V0UnBhZ2UoUGluZ2JhY2tQYXJhbS5QQUdFX0ZFRURERVRBSUwpLnNldFJzZWF0KG9wQ29tbWVudEVudGl0eS5pc1VzZXJTaHV0VXAoKSA/ICI1MDU1NjZfMTIiIDogIjUwNTU2Nl8wNiIpLnNlbmQoKTsKICAgICAgICAgICAgICAgICAgICBDb21tb25GZWVkQ29udGVudEhlbHBlci50b2dnbGVTaHV0VXAobUNvbnRleHQsIG9wQ29tbWVudEVudGl0eS5pc1VzZXJTaHV0VXAoKSwgb3BDb21tZW50RW50aXR5LmdldFVpZCgpLCBnZXRIb3N0KCkuZ2V0V2FsbElkKCksIGdldEhvc3QoKS5nZXRPcmlnaW5JZCgpLCBvcENvbW1lbnRFbnRpdHkuZ2V0VWlkKCkgPT0gZ2V0SG9zdCgpLmdldE1hc3RlcklkKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgb3B0aW9uc1BhcmFtcy5hZGQoc2h1dFVwSXRlbSk7CiAgICAgICAgfQoKICAgICAgICBuZXcgTWVudURpYWxvZy5CdWlsZGVyKCkuc2V0TWVudUl0ZW1zKG9wdGlvbnNQYXJhbXMpLnNob3cobUNvbnRleHQpOwogICAgfQoKCiAgICAvKioKICAgICAqIFY3LjYg0MLU9iC4/NDCxsDC28HQse3U3te0zKwKICAgICAqLwogICAgcHVibGljIHZvaWQgdXBkYXRlSXRlbUFncmVlVmlldyhmaW5hbCBUZXh0VmlldyBwcmFpc2VDb3VudCwgZmluYWwgSW1hZ2VWaWV3IHByYWlzZUl2LCBDb21tZW50RW50aXR5IGNvbW1lbnREYXRhKSB7CgogICAgICAgIGlmIChwcmFpc2VDb3VudCA9PSBudWxsIHx8IGNvbW1lbnREYXRhID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpbnQgY291bnQgPSBjb21tZW50RGF0YS5nZXRBZ3JlZUNvdW50KCk7CiAgICAgICAgaWYgKGNvdW50ID4gMCkgewogICAgICAgICAgICBwcmFpc2VDb3VudC5zZXRUZXh0KFN0cmluZ1V0aWxzLmdldFVuaWZpZWREaXNwbGF5Q291bnQoY291bnQpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcmFpc2VDb3VudC5zZXRUZXh0KCIiKTsKICAgICAgICB9CiAgICAgICAgaWYgKGNvbW1lbnREYXRhLmhhc0FncmVlKCkpIHsKICAgICAgICAgICAgcHJhaXNlSXYuc2V0SW1hZ2VSZXNvdXJjZShSLmRyYXdhYmxlLnBwX3F6X2ZlZWRfbGlrZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcHJhaXNlSXYuc2V0SW1hZ2VSZXNvdXJjZShSLmRyYXdhYmxlLnBwX3F6X2ZlZWRfdW5saWtlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBWNy42INDC1PYgxsDC27Xj1N4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGhhbmRsZUNvbW1lbnRBZ3JlZShmaW5hbCBUZXh0VmlldyBjbGlja2VkVGV4dFZpZXcsIGZpbmFsIEltYWdlVmlldyBsaWtlSXYsIGZpbmFsIGludCBjb21tZW50SXRlbVBvc2l0aW9uKSB7CiAgICAgICAgaWYgKGNsaWNrZWRUZXh0VmlldyA9PSBudWxsIHx8IGdldENvbW1lbnRMaXN0KCkgPT0gbnVsbCkgewogICAgICAgICAgICBQUExvZy5lKFRBRywgImVycm9yOiBoYW5kbGUgQWdyZWUgLCBsaWtlZCB2aWV3IG5vdCBzaG93ICIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvL1Y3LjYg0MLU9iC149TeZW50aXR5CiAgICAgICAgZmluYWwgQ29tbWVudEVudGl0eSBjb21tZW50RW50aXR5ID0gZ2V0Q29tbWVudExpc3QoKS5nZXQoY29tbWVudEl0ZW1Qb3NpdGlvbik7CgogICAgICAgIFN0cmluZyBhbmltYXRpb25GaWxlTmFtZTsKICAgICAgICBpZiAoIWNvbW1lbnRFbnRpdHkuaGFzQWdyZWUoKSkgewogICAgICAgICAgICBhbmltYXRpb25GaWxlTmFtZSA9ICJkaXNhZ3JlZS5qc29uIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbmltYXRpb25GaWxlTmFtZSA9ICJhZ3JlZS5qc29uIjsKICAgICAgICB9CgogICAgICAgIEZlZWRDb21tb25IZWxwZXIubGlrZSghY29tbWVudEVudGl0eS5oYXNBZ3JlZSgpLCBtTGlzdFZpZXcsIGxpa2VJdiwKICAgICAgICAgICAgICAgIFVJVXRpbHMuZGlwMnB4KDY1KSwgVUlVdGlscy5kaXAycHgoNjUpKTsKCiAgICAgICAgLy+3orP20ru0zs34wufH68fzo6zN+MLnzrTTprTw1q7HsKOssrvUytDt1Nm0zrSlt6K149TeoaMKICAgICAgICB1cGRhdGVDbGlja2FibGUoZmFsc2UsIGNsaWNrZWRUZXh0Vmlldyk7CiAgICAgICAgLy/U2bTOo6y4+b7dt/7O8bbLt7W72LXEZmVlZMbAwtvB0LHtxdC2z8O/0rvM9cbAwtvKx7fxteO5/dTeCiAgICAgICAgaWYgKGNvbW1lbnRFbnRpdHkuaGFzQWdyZWUoKSkgey8vt/7O8bbLxsDC29e0zKzOqtLRtePU3gogICAgICAgICAgICBjb21tZW50UmVwb3NpdG9yeS5yZW1vdmVDb21tZW50QWdyZWUoY29tbWVudEVudGl0eSxuZXcgQWdyZWVDb21tZW50UmVxdWVzdC5BZ3JlZUNvbW1lbnRSZXF1ZXN0TGlzdGVuZXIoKSB7CgogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvblN1Y2Nlc3MoU3RyaW5nIHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNsaWNrYWJsZSh0cnVlLCBjbGlja2VkVGV4dFZpZXcpOy8vzfjC58frx/PTprTwo6y71ri0tePU3rC0xaW/ybXju/fXtMysoaMKICAgICAgICAgICAgICAgICAgICBjb21tZW50Q2FsbGJhY2sub25Db21tZW50RGlzQWdyZWVkKGNvbW1lbnRFbnRpdHkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25FcnJvcihTdHJpbmcgcmVhc29uKSB7CiAgICAgICAgICAgICAgICAgICAgUGFvUGFvVGlwcy5zaG93RGVmYXVsdChtQ29udGV4dCwgcmVhc29uKTsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVDbGlja2FibGUodHJ1ZSwgY2xpY2tlZFRleHRWaWV3KTsvL834wufH68fz06a08KOsu9a4tLXj1N6wtMWlv8m147v317TMrKGjCiAgICAgICAgICAgICAgICAgICAgLy+72Ln2Ci8vICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLm5vdGlmeURhdGFTZXRDaGFuZ2VkKCk7CiAgICAgICAgICAgICAgICAgICAgYWRhcHRlci5ub3RpZnlJdGVtQ2hhbmdlZChjb21tZW50SXRlbVBvc2l0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgoKICAgICAgICB9IGVsc2Ugey8vt/7O8bbLxsDC29e0zKzOqs60tePU3goKICAgICAgICAgICAgY29tbWVudFJlcG9zaXRvcnkuYWdyZWVDb21tZW50KGNvbW1lbnRFbnRpdHksbmV3IEFncmVlQ29tbWVudFJlcXVlc3QuQWdyZWVDb21tZW50UmVxdWVzdExpc3RlbmVyKCkgewoKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25TdWNjZXNzKFN0cmluZyByZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVDbGlja2FibGUodHJ1ZSwgY2xpY2tlZFRleHRWaWV3KTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50Q2FsbGJhY2sub25Db21tZW50QWdyZWVkKGNvbW1lbnRFbnRpdHkpOwogICAgICAgICAgICAgICAgICAgIENvbW1lbnRzSGVscGVyLmdldENvbW1lbnRzR2VuZXJhbFBpbmdiYWNrKGdldEhvc3QoKSwgcnBhZ2UpLnNldFQoUGluZ2JhY2tQYXJhbS5MT0dfVFlQRV9MSUtFX0ZFRURfQ09NTUVOVCkuc2VuZCgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25FcnJvcihTdHJpbmcgcmVhc29uKSB7CiAgICAgICAgICAgICAgICAgICAgUGFvUGFvVGlwcy5zaG93RGVmYXVsdChtQ29udGV4dCwgcmVhc29uKTsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVDbGlja2FibGUodHJ1ZSwgY2xpY2tlZFRleHRWaWV3KTsKICAgICAgICAgICAgICAgICAgICAvL7vYufYKLy8gICAgICAgICAgICAgICAgICAgIGFkYXB0ZXIubm90aWZ5RGF0YVNldENoYW5nZWQoKTsKICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLm5vdGlmeUl0ZW1DaGFuZ2VkKGNvbW1lbnRJdGVtUG9zaXRpb24pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgLy/P7NOmsb612LzZ0LTK/b7dINXiwO9yZWN5Y2xlclZpZXfU2m5vdGlmeURhdGFTZXRDaGFuZ2Vk1q6686Os1q7HsLXEaXRlbVZpZXexu7i008PU2sHLsfC1xLXYt72howogICAgICAgIGFkYXB0ZXIubm90aWZ5SXRlbUNoYW5nZWQoY29tbWVudEl0ZW1Qb3NpdGlvbik7CiAgICB9CgogICAgLyoqCiAgICAgKiC4/NDCtePU3iBUZXh0VmlldyC/ybXj17TMrAogICAgICovCiAgICBwcml2YXRlIHZvaWQgdXBkYXRlQ2xpY2thYmxlKGJvb2xlYW4gY2xpY2thYmxlLCBUZXh0VmlldyB0ZXh0VmlldykgewogICAgICAgIHRleHRWaWV3LnNldENsaWNrYWJsZShjbGlja2FibGUpOwogICAgfQoKCiAgICAvKioKICAgICAqILzGy+NsaXN0Vmlld9bQv8m8+7K/t9a1xGhlYWRlclZpZXfK/cG/CiAgICAgKi8KICAgIHByaXZhdGUgaW50IGdldFZpc2libGVIZWFkZXJWaWV3c0NvdW50KCkgewogICAgICAgIGludCBoZWFkZXJDb3VudCA9IDA7Ly+12tK7uPZpdGVtysdoZWFkZXKjrHdoaWxl0a27t8XQts8gz8LSu7j2v8m8+2l0ZW3Kx7K7ysdIZWFkZXIKICAgICAgICB3aGlsZSAoIShtTGlzdFZpZXcuZ2V0Q29udGVudFZpZXcoKS5nZXRDaGlsZEF0KGhlYWRlckNvdW50KS5nZXRUYWcoKSBpbnN0YW5jZW9mIENvbW1lbnRIb2xkZXIpKSB7CiAgICAgICAgICAgIGhlYWRlckNvdW50Kys7CiAgICAgICAgfQogICAgICAgIHJldHVybiBoZWFkZXJDb3VudDsKICAgIH0KCgogICAgLyoqCiAgICAgKiDTptPDtv68ttKzw+a1xMr9vt2x5LuvCiAgICAgKgogICAgICogQHBhcmFtIGRhdGEgseS7r8r9vt3S1LywwODQzQogICAgICovCiAgICBwdWJsaWMgdm9pZCBwcm9jZXNzQ2hhbmdlZERhdGEoQ2hhbmdlZERhdGFPZkNvbW1lbnRzIGRhdGEpIHsKICAgICAgICBjb21tZW50UmVwb3NpdG9yeS5wcm9jZXNzQ2hhbmdlZERhdGEoZGF0YSk7CiAgICAgICAgYWRhcHRlci5ub3RpZnlEYXRhU2V0Q2hhbmdlZCgpOwogICAgfQoKICAgIC8qKioKICAgICAqIL370dSzybmmuvO82dC0yv2+3QogICAgICovCiAgICBwdWJsaWMgdm9pZCBwcm9jZXNzU2h1dFVwU3RhdGVDaGFuZ2VkKGxvbmcgdWlkLCBib29sZWFuIHNodXR1cCkgewogICAgICAgIGNvbW1lbnRSZXBvc2l0b3J5LnByb2Nlc3NTaHV0VXBTdGF0ZUNoYW5nZWQodWlkLCBzaHV0dXApOwogICAgfQoKICAgIHB1YmxpYyBDb21tZW50c0NvbmZpZ3VyYXRpb24gZ2V0Q29uZmlnKCkgewogICAgICAgIHJldHVybiBjb25maWc7CiAgICB9CgogICAgLy90b2RvIGhvc3TTprjD1/fOqmNvbW1lbnRSZXBvc2l0b3J5u7nKx21vZGVs1tC1xNK7uPa21M/zo78KICAgIHB1YmxpYyBJQ29tbWVudEhvc3QgZ2V0SG9zdCgpIHsKICAgICAgICByZXR1cm4gY29tbWVudFJlcG9zaXRvcnkuZ2V0SG9zdCgpOwogICAgfQoKICAgIHB1YmxpYyBjbGFzcyBDb21tZW50c0FkYXB0ZXIgZXh0ZW5kcyBSZWN5Y2xlclZpZXcuQWRhcHRlcgogICAgewoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgUmVjeWNsZXJWaWV3LlZpZXdIb2xkZXIgb25DcmVhdGVWaWV3SG9sZGVyKFZpZXdHcm91cCB2aWV3R3JvdXAsIGludCBpKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tbWVudEhvbGRlcihMYXlvdXRJbmZsYXRlci5mcm9tKG1Db250ZXh0KS5pbmZsYXRlKFIubGF5b3V0LnBwX2ZlZWRfY29tbWVudF9pdGVtLG51bGwpKTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIG9uQmluZFZpZXdIb2xkZXIoUmVjeWNsZXJWaWV3LlZpZXdIb2xkZXIgdmlld0hvbGRlciwgaW50IGkpIHsKICAgICAgICAgICAgdXBkYXRlSXRlbVZpZXcoaSwoQ29tbWVudEhvbGRlcikgdmlld0hvbGRlcik7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgaW50IGdldEl0ZW1Db3VudCgpIHsKICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25VdGlscy5zaXplKGdldENvbW1lbnRMaXN0KCkpOwogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSB2b2lkIHVwZGF0ZUl0ZW1WaWV3KGZpbmFsIGludCBwb3NpdGlvbiwgZmluYWwgQ29tbWVudEhvbGRlciBjb21tZW50SG9sZGVyKSB7CiAgICAgICAgICAgIFBQTG9nLmQoInVwZGF0ZUl0ZW1WaWV3IHBvc2l0aW9uID0gIiArIHBvc2l0aW9uKTsKLy8gubnU7M/Uyr7K/b7dCiAgICAgICAgICAgIGZpbmFsIFZpZXcgY249Y29tbWVudEhvbGRlci5pdGVtVmlldzsKICAgICAgICAgICAgZmluYWwgQ29tbWVudEVudGl0eSBkYXRhID0gZ2V0Q29tbWVudExpc3QoKS5nZXQocG9zaXRpb24pOwogICAgICAgICAgICAvL9Lss6O0psDtwt+8rQogICAgICAgICAgICBpZiAoY29tbWVudEhvbGRlciA9PSBudWxsIHx8IGRhdGEgPT0gbnVsbCB8fCBnZXRDb21tZW50TGlzdCgpID09IG51bGwKICAgICAgICAgICAgICAgICAgICB8fCBnZXRDb21tZW50TGlzdCgpLnNpemUoKSA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vyejWw76rssrGwMLb0+vG1c2oxsDC27fWuO7P3woKICAgICAgICAgICAgLy9QYW9wYW8gMTYwCiAgICAgICAgICAgIC8v1tjWw7/JvPvQ1AogICAgICAgICAgICBjb21tZW50SG9sZGVyLmNvbW1lbnRzRGl2aWRlZExpbmUuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOy8vyc+yv73PtNa31rjuz98KICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50c0RlY29yYXRlVHYuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOy8vvquyysbAwtu78tXfyKuyv8bAwtsKICAgICAgICAgICAgY29tbWVudEhvbGRlci5sb2FkaW5nQmFyLnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKCiAgICAgICAgICAgIGlmICghaXNPbmx5SG90KCkpIHsKICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PSAwICYmIGdldENvbW1lbnRMaXN0KCkuZ2V0KHBvc2l0aW9uKS5nZXRJc0hvdCgpICYmICFjb25maWcuaXNIaWRlVG9wVGV4dCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy/I57n7zqq12tK7uPa+q7LKxsDC26Osyc+yv8/Uyr6+q7LKxsDC2wogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuY29tbWVudHNEaXZpZGVkTGluZS5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50c0RlY29yYXRlVHYuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuaG90Q29tbWVudHNEZWNvcmF0ZVR2LnNldFRleHQobUNvbnRleHQuZ2V0UmVzb3VyY2VzKCkuZ2V0U3RyaW5nKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9uaWNlX2l0ZW0pKTsKICAgICAgICAgICAgICAgICAgICBWaWV3VXRpbHMuc2V0VmlzaWJpbGl0eShjb21tZW50SG9sZGVyLmxvYWRpbmdCYXIsIGlzTG9hZGluZyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYm9vbGVhbiBwcmV2aW91c0lzSG90ID0gcG9zaXRpb24gPj0gMSAmJiBnZXRDb21tZW50TGlzdCgpLmdldChwb3NpdGlvbiAtIDEpLmdldElzSG90KCk7CiAgICAgICAgICAgICAgICBib29sZWFuIGlzRmlyc3RPbmUgPSBwb3NpdGlvbiA9PSAwOwogICAgICAgICAgICAgICAgaWYgKChwcmV2aW91c0lzSG90IHx8IChpc0ZpcnN0T25lICYmICFnZXRDb25maWcoKS5pc0luZGVwZW5kZW50KCkpKSAmJiAhbU1vZGVsLmdldENvbW1lbnRzTGlzdCgpLmdldChwb3NpdGlvbikuZ2V0SXNIb3QoKQogICAgICAgICAgICAgICAgICAgICAgICAmJiAhZ2V0Q29uZmlnKCkuaXNIaWRlVG9wVGV4dCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy+1scewzqrG1c2oo6zJz9K7uPbOqr6rsso7u/LV37Wxx7DOqsbVzajH0s6qtdrSu7j2CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5jb21tZW50c0RpdmlkZWRMaW5lLnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmhvdENvbW1lbnRzRGVjb3JhdGVUdi5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50c0RlY29yYXRlVHYuc2V0VGV4dChtQ29udGV4dC5nZXRSZXNvdXJjZXMoKS5nZXRTdHJpbmcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLnN0cmluZy5wcF9jaXJjbGVfZmVlZF9jb21tZW50X2FsbF9pdGVtKSk7CiAgICAgICAgICAgICAgICAgICAgVmlld1V0aWxzLnNldFZpc2liaWxpdHkoY29tbWVudEhvbGRlci5sb2FkaW5nQmFyLCBpc0xvYWRpbmcpOwogICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0lzSG90KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIExpbmVhckxheW91dC5MYXlvdXRQYXJhbXMgbGF5b3V0UGFyYW1zID0gKExpbmVhckxheW91dC5MYXlvdXRQYXJhbXMpIGNvbW1lbnRIb2xkZXIuY29tbWVudHNEaXZpZGVkTGluZS5nZXRMYXlvdXRQYXJhbXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0UGFyYW1zLnRvcE1hcmdpbiA9IFZpZXdVdGlscy5kcDJweChtQ29udGV4dCwgNik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuY29tbWVudHNEaXZpZGVkTGluZS5zZXRMYXlvdXRQYXJhbXMobGF5b3V0UGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT0gMCkgewogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuY29tbWVudHNEaXZpZGVkTGluZS5zZXRWaXNpYmlsaXR5KGdldENvbmZpZygpLmlzSGlkZVRvcERpdmlkZXIoKSA/IFZpZXcuR09ORSA6IFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBlbmQgb2YgUGFvcGFvIDE2MAoKICAgICAgICAgICAgICAgIC8vz+rH6dKzz9TKvrj8tuAKICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PSBnZXRIb3RDb21tZW50Q3VycmVudENvdW50KCkgLSAxIC8vzrvWwwogICAgICAgICAgICAgICAgICAgICAgICAmJiBnZXRIb3RDb21tZW50VG90YWxDb3VudCgpID4gZ2V0SG90Q29tbWVudEN1cnJlbnRDb3VudCgpLy+089Pa0rvSswogICAgICAgICAgICAgICAgICAgICAgICAmJiBnZXRDb21tZW50TGlzdCgpLmdldChwb3NpdGlvbikuZ2V0SXNIb3QoKQogICAgICAgICAgICAgICAgICAgICAgICAmJiBjb25maWcuc2hvd0hvdENvbW1lbnRzKCkKICAgICAgICAgICAgICAgICAgICAgICAgJiYgZ2V0SG9zdCgpLnNob3dIb3RDb21tZW50cygpKSB7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50Vmlld01vcmVMYXlvdXQuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuaG90Q29tbWVudFZpZXdNb3JlLnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmhvdENvbW1lbnRWaWV3TW9yZS5zZXRUZXh0KFN0cmluZy5mb3JtYXQoIrLpv7S4/LbgKCVkKSIsIGdldEhvdENvbW1lbnRUb3RhbENvdW50KCkgLSBnZXRIb3RDb21tZW50Q3VycmVudENvdW50KCkpKTsKICAgICAgICAgICAgICAgICAgICBuZXcgUGluZ2JhY2soKS5zZXRCbG9jaygiNTA1MzQxXzAyIikuc2V0VChQaW5nYmFja1BhcmFtLlRZUEVfUEFHRV9TSE9XKS5zZW5kKCk7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50Vmlld01vcmVMYXlvdXQuc2V0T25DbGlja0xpc3RlbmVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZpZXcuT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soVmlldyB2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGdldEhvc3QoKSBpbnN0YW5jZW9mIENvbW1lbnRGZWVkSG9zdCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGluZ2JhY2soKS5zZXRSc2VhdCgiNTA1NTkxXzAxIikuc2V0VCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaW5nYmFja1BhcmFtLlRZUEVfQ0xJQ0spLnNlbmQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEhvdENvbW1lbnRzQWN0aXZpdHkuSG90Q29tbWVudHNKdW1wSGVscGVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q29udGV4dChtQ29udGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0RmVlZCgoKENvbW1lbnRGZWVkSG9zdCkgZ2V0SG9zdCgpKS5nZXRGZWVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEZvY3VzQ29tbWVudENvdW50KGdldEhvdENvbW1lbnRDdXJyZW50Q291bnQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanVtcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmhvdENvbW1lbnRWaWV3TW9yZUxheW91dC5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5ob3RDb21tZW50Vmlld01vcmUuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvL2NvbW1lbnRIb2xkZXIubG9jYXRpb24uc2V0VGV4dChtQ3RyZS5nZXRDbXRMaXN0KCkuZ2V0KHBvc2l0aW9uKS5nZXRMb2NhdGlvbigpKTsKICAgICAgICAgICAgLy8gu9i4tMbAwtu5psTcKMjnufvKx8P30MfU3rn9tcTGwMLbLMTHw7TIodfUye3OqrG7u9i4tMbAwtspCiAgICAgICAgICAgIGZpbmFsIENvbW1lbnRFbnRpdHkgcmVwbGllZENvbW1lbnQgPSBkYXRhLmlzU3RhclByYWlzZU1vZGUoKSA/IGRhdGEgOiBkYXRhLmdldFJlcGxpZWRDb21tZW50KCk7CiAgICAgICAgICAgIC8vse3H6cv10KG1xNa1CiAgICAgICAgICAgIGludCBleHByZXNzaW9uU3ppZSA9IFZpZXdVdGlscy5kcDJweChtQ29udGV4dCwgNSk7CiAgICAgICAgICAgIGlmIChyZXBsaWVkQ29tbWVudCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50TGF5b3V0LnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgIFN0cmluZyBwcmFpc2VUbyA9IG1Db250ZXh0LmdldFN0cmluZygKICAgICAgICAgICAgICAgICAgICAgICAgUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9vcF9wcmlhc2VfY29ubmVjdGlvbik7CiAgICAgICAgICAgICAgICBTdHJpbmcgcmVwbHlUbyA9IG1Db250ZXh0LmdldFN0cmluZygKICAgICAgICAgICAgICAgICAgICAgICAgUi5zdHJpbmcucHBfY2lyY2xlX2ZlZWRfY29tbWVudF9vcF9yZXBseV9jb25uZWN0aW9uKTsKICAgICAgICAgICAgICAgIFN0cmluZyByZXBsaWVkVXNlck5hbWUgPSByZXBsaWVkQ29tbWVudC5nZXRVbmFtZSgpOwogICAgICAgICAgICAgICAgZmluYWwgU3RyaW5nIHJlcGx5Q29udGVudCA9CiAgICAgICAgICAgICAgICAgICAgICAgIChkYXRhLmlzU3RhclByYWlzZU1vZGUoKSA/IHByYWlzZVRvIDogcmVwbHlUbykgKyByZXBsaWVkVXNlck5hbWU7CiAgICAgICAgICAgICAgICAvL7HqzOLW0LvYuLTXtMyszsSwuAogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5jb21tZW50VHlwZURlc2Muc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5jb21tZW50VHlwZURlc2Muc2V0VGV4dChyZXBseUNvbnRlbnQpOwogICAgICAgICAgICAgICAgaW50IHJlcGxpZWRDb21tZW50U3RhdHVzID0gcmVwbGllZENvbW1lbnQuZ2V0U3RhdHVzKCk7CiAgICAgICAgICAgICAgICBpZiAocmVwbGllZENvbW1lbnRTdGF0dXMgPT0gMSkgey8vMCDV/bOjzKyjrDEgyb6z/cyso6wzILT9yfPXtMysCiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudFRpdGxlTGF5b3V0LnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50Q29udGVudExheW91dC5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudFJlbW92ZWRMYXlvdXQuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50VGl0bGVMYXlvdXQuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIucmVwbGllZENvbW1lbnRDb250ZW50TGF5b3V0LnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50UmVtb3ZlZExheW91dC5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICAgICAgLy+xu7vYuLTUrcq8xsDC27XExNrI3QogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIucmVwbGllZENvbW1lbnRVc2VyLnNldFRleHQocmVwbGllZFVzZXJOYW1lICsgIjoiKTsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50Rmxvb3Iuc2V0VGV4dChyZXBsaWVkQ29tbWVudC5nZXRGbG9vcigpICsgIsKlIik7CiAgICAgICAgICAgICAgICAgICAgaW50IHRleHRWaWV3U2l6ZSA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW50KSBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50Q29udGVudC5nZXRNYWluQ29udGVudCgpLmdldFRleHRTaXplKCktZXhwcmVzc2lvblN6aWU7CiAgICAgICAgICAgICAgICAgICAgU3Bhbm5hYmxlU3RyaW5nIGV4cHJlc3Npb25UZXh0ID0gRW1vdGlvbkVkaXRVdGlscy5nZXRFeHByZXNzaW9uVGV4dCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1Db250ZXh0LCByZXBsaWVkQ29tbWVudC5nZXRDb250ZW50KCksIHRleHRWaWV3U2l6ZSk7CgoKICAgICAgICAgICAgICAgICAgICBDaGFyU2VxdWVuY2UgY29uY2F0ID0gZXhwcmVzc2lvblRleHQ7CiAgICAgICAgICAgICAgICAgICAgaWYocmVwbGllZENvbW1lbnQuZ2V0TWVkaWFFbnRpdHkoKSAhPSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHNvdXJjZSA9ICJbzbzGrF0iOwogICAgICAgICAgICAgICAgICAgICAgICBTcGFubmFibGVTdHJpbmcgcGljTGluayA9IG5ldyBTcGFubmFibGVTdHJpbmcoc291cmNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgRm9yZWdyb3VuZENvbG9yU3BhbiB0ZXh0Q29sb3IgPSBuZXcgRm9yZWdyb3VuZENvbG9yU3BhbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtQ29udGV4dC5nZXRSZXNvdXJjZXMoKS5nZXRDb2xvcihSLmNvbG9yLmNvbG9yXzBiYmUwNikpOwogICAgICAgICAgICAgICAgICAgICAgICBwaWNMaW5rLnNldFNwYW4odGV4dENvbG9yLCAwLHBpY0xpbmsubGVuZ3RoKCkgLCBTcGFubmVkLlNQQU5fRVhDTFVTSVZFX0VYQ0xVU0lWRSk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgU2FtcGxlQ2xpY2thYmxlU3BhbiBjbGlja2FibGVTcGFuID0gbmV3IFNhbXBsZUNsaWNrYWJsZVNwYW4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uTG9uZ0NsaWNrKFZpZXcgd2lkZ2V0KSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhWaWV3IHZpZXcpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXlMaXN0PE1lZGlhRW50aXR5PiBtZWRpYUVudGl0aWVzID0gbmV3IEFycmF5TGlzdDw+KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFFbnRpdGllcy5hZGQocmVwbGllZENvbW1lbnQuZ2V0TWVkaWFFbnRpdHkoKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZlZWRKdW1wZXIuanVtcDJQcmV2aWV3UGhvdG9zKG1Db250ZXh0LDAsIDAsIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYUVudGl0aWVzLCBmYWxzZSwgSVZpZXdIb2xkZXJDaXJjbGVDb25zdC5GUk9NX0ZFRURfREVUQUlMX1BBR0UsbnVsbCxudWxsKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBwaWNMaW5rLnNldFNwYW4oY2xpY2thYmxlU3BhbiwgMCxwaWNMaW5rLmxlbmd0aCgpICwgU3Bhbm5lZC5TUEFOX0VYQ0xVU0lWRV9FWENMVVNJVkUpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25jYXQgPSAgVGV4dFV0aWxzLmNvbmNhdChjb25jYXQsIHBpY0xpbmspOwogICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50Q29udGVudC5nZXRNYWluQ29udGVudCgpLnNldE9uVG91Y2hMaXN0ZW5lcihuZXcgTGlua01vdmVtZW50TWV0aG9kT3ZlcnJpZGUoKSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLnJlcGxpZWRDb21tZW50Q29udGVudC5zZXRUZXh0KGNvbmNhdCk7CgogICAgICAgICAgICAgICAgICAgIC8vsbu72Li01K3KvMbAwtvW0LD8uqzT79L0u9i4tNDFz6IKICAgICAgICAgICAgICAgICAgICBBdWRpb0VudGl0eSByZXBsaWVkQ29tbWVudEF1ZGlvID0gcmVwbGllZENvbW1lbnQuZ2V0QXVkaW9FbnRpdHkoKTsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSByZXBsaWVkQ29tbWVudEF1ZGlvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIucmVwbGllZENvbW1lbnRDb250ZW50LnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudFNvdW5kVmlldy5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIucmVwbGllZENvbW1lbnRTb3VuZFZpZXcuc2V0U291bmREYXRhKHJlcGxpZWRDb21tZW50QXVkaW8pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7Ly/Wu8/Uyr7T79L0us3OxNfWzsSwuMjO0uLSu9bWCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIucmVwbGllZENvbW1lbnRDb250ZW50LnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudFNvdW5kVmlldy5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5jb21tZW50VHlwZURlc2Muc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudExheW91dC5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vxsDC287EsLjE2sjdCiAgICAgICAgICAgIGludCB0ZXh0Vmlld1NpemUgPSAoaW50KSBjb21tZW50SG9sZGVyLmNvbnRlbnQuZ2V0TWFpbkNvbnRlbnQoKS5nZXRUZXh0U2l6ZSgpLWV4cHJlc3Npb25TemllOwogICAgICAgICAgICBjb21tZW50SG9sZGVyLmNvbnRlbnQuc2V0VGV4dChFbW90aW9uRWRpdFV0aWxzLmdldEV4cHJlc3Npb25UZXh0KG1Db250ZXh0LCBkYXRhLmdldENvbnRlbnQoKSwKICAgICAgICAgICAgICAgICAgICB0ZXh0Vmlld1NpemUpKTsKICAgICAgICAgICAgLy/GwMLb0+/S9MTayN0KICAgICAgICAgICAgLy9jaGVuaHVhY2hvbmdAcWl5aS5jb20gyOe5+8rH0+/S9MbAwtvU8tW5yr5Tb3VuZEl0ZW1WaWV3IFNUQVJUCiAgICAgICAgICAgIEF1ZGlvRW50aXR5IGF1ZGlvRW50aXR5ID0gZGF0YS5nZXRBdWRpb0VudGl0eSgpOwogICAgICAgICAgICBpZiAoYXVkaW9FbnRpdHkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5zb3VuZEl0ZW1WaWV3LnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuc291bmRJdGVtVmlldy5zZXRTb3VuZERhdGEoYXVkaW9FbnRpdHkpOwogICAgICAgICAgICAgICAgLy88IS0tIFY3LjkgyOe5+8rH0+/S9MbAwtvU8r32vfZTb3VuZEl0ZW1WaWV3IKOssrvVucq+IENvbnRlbnTOxLC4IGxhbmdqaWFuQHFpeWkuY29tICBTVEFSVC0tPgogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5jb250ZW50LnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgIC8vPCEtLSBWNy45IMjnufvKx9Pv0vTGwMLb1PK99r32U291bmRJdGVtVmlldyCjrLK71bnKviBDb250ZW50zsSwuCBsYW5namlhbkBxaXlpLmNvbSAgRU5ELS0+CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmNvbnRlbnQuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5zb3VuZEl0ZW1WaWV3LnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2NoZW5odWFjaG9uZ0BxaXlpLmNvbSDI57n7ysfT79L0xsDC29Ty1bnKvlNvdW5kSXRlbVZpZXcgRU5ECgogICAgICAgICAgICBsb25nIGZsb29yID0gZGF0YS5nZXRGbG9vcigpOwogICAgICAgICAgICAvL8S/x7C3/s7xxvfJz7j4tcTK/b7do6zI57n7ysdmbG9vciA9IDCjrNKyse3D98O709DCpbLj0MXPoqGjCiAgICAgICAgICAgIGlmIChmbG9vciA+IDApIHsKICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuZmxvb3Iuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5mbG9vci5zZXRUZXh0KFN0cmluZy5mb3JtYXQobUNvbnRleHQuZ2V0UmVzb3VyY2VzKCkuZ2V0U3RyaW5nKAogICAgICAgICAgICAgICAgICAgICAgICBSLnN0cmluZy5wcF9xel9mbG9vcl9mb3JtYXQpLCBTdHJpbmcudmFsdWVPZihmbG9vcikpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuZmxvb3Iuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGF0YS5pc1N0YXJQcmFpc2VNb2RlKCkpIHsKICAgICAgICAgICAgICAgIC8vw/fQx7Xj1N7Eo8q9LL2r0v6y2MbAwtvE2sjdus3CpbLjyv0KICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuc291bmRJdGVtVmlldy5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmNvbnRlbnQuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5mbG9vci5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9WNy42INDC1PYKICAgICAgICAgICAgdXBkYXRlSXRlbUFncmVlVmlldyhjb21tZW50SG9sZGVyLnByYWlzZUNvdW50VHYsIGNvbW1lbnRIb2xkZXIucHJhaXNlSXYsIGRhdGEpOwogICAgICAgICAgICAvL1Y3LjYg0MLU9iC149TestnX9wogICAgICAgICAgICBjb21tZW50SG9sZGVyLnByYWlzZUxheW91dC5zZXRPbkNsaWNrTGlzdGVuZXIobmV3IFZpZXcuT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkNsaWNrKFZpZXcgdikgewogICAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbW1lbnRBZ3JlZShjb21tZW50SG9sZGVyLnByYWlzZUNvdW50VHYsIGNvbW1lbnRIb2xkZXIucHJhaXNlSXYsIHBvc2l0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjb21tZW50SG9sZGVyLnRpbWUuc2V0VGV4dChTdHJpbmdVdGlscy5nZXRUaW1lR2FwKG1Db250ZXh0LCBkYXRhLmdldEFkZFRpbWUoKSkpOwogICAgICAgICAgICBib29sZWFuIGlzT3duZXIgPSBDb21tb25Vc2VySW5mb1V0aWxzLmdldFVzZXJJZChQUENvbW1vbkFwcC5nZXRQYW9QYW9Db250ZXh0KCkpID09IGRhdGEuZ2V0VWlkKCk7CiAgICAgICAgICAgIGRhdGEuc2V0SXNPd25lcihpc093bmVyKTsKCiAgICAgICAgICAgIC8vUFBJbWFnZUxvYWRlci5sb2FkSW1hZ2VXaXRoUmV0cnkoY29tbWVudEhvbGRlci5pY29uLFIuZHJhd2FibGUucHBfaWNvbl9hdmF0YXJfZGVmYXVsdCwKICAgICAgICAgICAgLy8gZGF0YS5pc1N0YXJQcmFpc2VNb2RlKCkgPyBkYXRhLmdldFN0YXJVc2VySW5mb0VudGl0eSgpLmdldEljb24oKTpkYXRhLmdldEljb24oKSxmYWxzZSk7CiAgICAgICAgICAgIC8vbUltYWdlTG9hZGVyLmRpc3BsYXlJbWFnZShkYXRhLmdldEljb24oKSwgY29tbWVudEhvbGRlci5pY29uKTsKICAgICAgICAgICAgY29tbWVudEhvbGRlci5pY29uLnNldEltYWdlVVJJKAogICAgICAgICAgICAgICAgICAgIGRhdGEuaXNTdGFyUHJhaXNlTW9kZSgpID8gZGF0YS5nZXRTdGFyVXNlckluZm9FbnRpdHkoKS5nZXRJY29uKCkgOiBkYXRhLmdldEljb24oKSk7CgogICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqIGN3ayCypbfFxNq6y9TaNy42uvOjrMrTxrWypbfFyrFpdGVts6SwtMrCvP674cqn0KejrLb419NWaWV3s6SwtNPQ0KejrM/IuPy4xMjnz8Igc3RhcnQgKioqKioqKioqKioqKioqLwogICAgICAgICAgICAvL7OksLTV+8z1xsDC29Ky0qq7vcbwssu1pSBWNy450N64xMTayN2jur2rteO798rCvP7J6NbDtb24uFZpZXcKICAgICAgICAgICAgc2V0Vmlld09uTG9uZ0NsaWNrKGNuLCBkYXRhKTsKICAgICAgICAgICAgaWYgKGdldEhvc3QoKS5pc0lucHV0Qm94RW5hYmxlKCkpIHsKICAgICAgICAgICAgICAgIC8vtaW797vYuLQgVjcuOSDQ3rjExNrI3aO6vau147v3ysK8/sno1sO1vbi4VmlldwogICAgICAgICAgICAgICAgc2V0Vmlld09uQ2xpY2soY24sIGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKiogY3drILKlt8XE2rrL1No3Lja686OsytPGtbKlt8XKsWl0ZW2zpLC0ysK8/rvhyqfQp6OstvjX01ZpZXezpLC009DQp6Osz8i4/LjEyOfPwiBlbmQgKioqKioqKioqKioqKioqLwogICAgICAgICAgICAvLzcuOdDC1PYsyq631tbY0qqjrLGjtOa1pbv3aXRlbc671sOjrNTayb6z/cbAwtvKsaOsssXE3MXQts/Sqsm+s/21xMbAwtvKx7fx1Nqxu8m+s/21xMbAwtvWrsewCiAgICAgICAgICAgIGRhdGEuc2V0SXRlbVBvc2l0aW9uKHBvc2l0aW9uKTsKCiAgICAgICAgICAgIFZpZXcuT25DbGlja0xpc3RlbmVyIHVzZXJJbmZvQ2xpY2tMaXN0ZW5lciA9IG5ldyBWaWV3Lk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhWaWV3IHZpZXcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5pc1N0YXJQcmFpc2VNb2RlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgRmVlZENvbGxlY3Rpb25IZWxwZXIuSnVtcEZyb21JY29uQW5kTmFtZUZvckNvbW1lbnRzKG1Db250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZ2V0U3RhclVzZXJJbmZvRW50aXR5KCkuZ2V0VWlkKCksIFVzZXJJZGVudGl0eS5JREVOVElUWV9TVEFSLCAwKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBGZWVkQ29sbGVjdGlvbkhlbHBlci5KdW1wRnJvbUljb25BbmROYW1lRm9yQ29tbWVudHMobUNvbnRleHQsIGRhdGEuZ2V0VWlkKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5nZXRJZGVudGl0eSgpLCBkYXRhLmdldENvbnRlbnRpZCgpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb21tZW50SG9sZGVyLmljb24uc2V0T25DbGlja0xpc3RlbmVyKHVzZXJJbmZvQ2xpY2tMaXN0ZW5lcik7CiAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXRPbkNsaWNrTGlzdGVuZXIodXNlckluZm9DbGlja0xpc3RlbmVyKTsKCiAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuS09MLnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgaWYgKCFkYXRhLmlzU3RhclByYWlzZU1vZGUoKSkgewogICAgICAgICAgICAgICAgaWYgKGRhdGEuaXNNYXN0ZXIoKSAmJiBnZXRIb3N0KCkuc2hvd01hc3RlcigpKSB7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tYXN0ZXJJY29uLnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tYXN0ZXJJY29uLnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghZGF0YS5pc01hc3RlcigpICYmIGRhdGEuaXNBZG1pbmlzdHJhdG9yKCkpIHsKICAgICAgICAgICAgICAgICAgICAvL8jnufvKx7ncwO3UsdPDu6cKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmFkbWluSWNvbi5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuYWRtaW5JY29uLnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubWFzdGVySWNvbi5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLmFkbWluSWNvbi5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFkYXRhLmlzTWFzdGVyKCkgJiYgIWRhdGEuaXNBZG1pbmlzdHJhdG9yKCkpIHsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmdldEtPTCgpID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLktPTC5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIuS09MLnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKGRhdGEuaXNTdGFyUHJhaXNlTW9kZSgpICYmIGRhdGEuZ2V0U3RhclVzZXJJbmZvRW50aXR5KCkuZ2V0U3RhcktvbCgpID09IDEpKSB7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLktPTC5zZXRWaXNpYmlsaXR5KFZpZXcuVklTSUJMRSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vw/fQx823tPfQodDH0MejrNDo0qrU2mljb266zW1hc3Rlckljb27Wrrrz1NnJ6NbDCi8vICAgICAgICBpZiAoZGF0YS5nZXRJZGVudGl0eSgpID09IFVzZXJJZGVudGl0eS5JREVOVElUWV9TVEFSIHx8IGRhdGEuaXNTdGFyUHJhaXNlTW9kZSgpKSB7Ci8vICAgICAgICAgICAgLy/S/rLY1K3Nt8/xo6zP1Mq+w/fQx8z51r0KLy8gICAgICAgICAgICBjb21tZW50SG9sZGVyLnN0YXJJY29uLnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKLy8gICAgICAgIH0gZWxzZSB7Ci8vICAgICAgICAgICAgY29tbWVudEhvbGRlci5zdGFySWNvbi5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7Ci8vICAgICAgICB9CiAgICAgICAgICAgIGlmIChkYXRhLmlzU3RhclByYWlzZU1vZGUoKSAmJiAhVGV4dFV0aWxzLmlzRW1wdHkoZGF0YS5nZXRTdGFyVXNlckluZm9FbnRpdHkoKS5nZXRTdGFyUGVuZGFudCgpKSkgeyAgICAgICAvLy8vvqu7qsbAwtvVucq+udK8/gogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tQXZhdGFyRGVjb3JhdGUuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tQXZhdGFyRGVjb3JhdGUuc2V0SW1hZ2VVUkkoZGF0YS5nZXRTdGFyVXNlckluZm9FbnRpdHkoKS5nZXRTdGFyUGVuZGFudCgpKTsKICAgICAgICAgICAgfSBlbHNlIGlmICghVGV4dFV0aWxzLmlzRW1wdHkoZGF0YS5tUGVuZGFudFBpY3R1cmVVcmwpKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8gxtXNqMbAwtvVucq+udK8/gogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tQXZhdGFyRGVjb3JhdGUuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tQXZhdGFyRGVjb3JhdGUuc2V0SW1hZ2VVUkkoZGF0YS5tUGVuZGFudFBpY3R1cmVVcmwpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5tQXZhdGFyRGVjb3JhdGUuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vw/fQx7Xj1N65psTcCiAgICAgICAgICAgIC8vw/fQx8bAwtu5psTcCiAgICAgICAgICAgIC8vIFY3LjkgYWRkIMbAwtvV37XEuPbIy9DFz6LD6Mr2CiAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXRFbmFibGVOYW1lQ29sb3IodHJ1ZSk7CiAgICAgICAgICAgIC8vVjcuOSBhZGQg1NrJ6NbDTmFtZc7EsLjWrsewo6zJ6NbDseq8x6OssrvIw7/YvP7J6NbD1+6087OktsgKLy8gICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXRFbmFibGVOYW1lV2lkdGgoZmFsc2UpOwoKICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLnNldFNob3dMZXZlbE5hbWUoZmFsc2UpOwogICAgICAgICAgICAvL8P30MfU3rn9tcTGwMLbsrvQ6NKqz9TKvrXIvLYKICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLnNldExldmVsSWNvbihkYXRhLmdldExldmVsKCksICFkYXRhLmlzU3RhclByYWlzZU1vZGUoKSAmJiAhZ2V0Q29uZmlnKCkuaGlkZUxldmVsKCksCiAgICAgICAgICAgICAgICAgICAgZGF0YS5nZXRMZXZlbE5hbWUoKSk7CiAgICAgICAgICAgIC8vVjcuOSBhZGQgyejWw05hbWXOxLC41+6089fWt/uzpLbIzqoxMAovLyAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLmdldFRleHRWaWV3KCkuc2V0RmlsdGVycyhuZXcgSW5wdXRGaWx0ZXJbXXtuZXcgSW5wdXRGaWx0ZXIuTGVuZ3RoRmlsdGVyKAovLyAgICAgICAgICAgICAgICAxMCl9KTsKICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLmdldFRleHRWaWV3KCkuc2V0TWF4RW1zKDEwKTsKICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLmdldFRleHRWaWV3KCkuc2V0RWxsaXBzaXplKFRleHRVdGlscy5UcnVuY2F0ZUF0LkVORCk7CiAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXROYW1lKGRhdGEuaXNTdGFyUHJhaXNlTW9kZSgpID8gZGF0YS5nZXRTdGFyVXNlckluZm9FbnRpdHkoKS5nZXRVbmFtZSgpCiAgICAgICAgICAgICAgICAgICAgOiBkYXRhLmdldFVuYW1lKCkpOwogICAgICAgICAgICBpbnQgcmVzaWQgPSBTdGFyQ2lyY2xlVXRpbHMuZ2V0UmVzQnlJbmRlbnRpdHkoZGF0YS5nZXRJZGVudGl0eSgpKTsKICAgICAgICAgICAgaWYgKGRhdGEuaXNTdGFyUHJhaXNlTW9kZSgpKSB7CiAgICAgICAgICAgICAgICByZXNpZCA9IFN0YXJDaXJjbGVVdGlscy5nZXRSZXNCeUluZGVudGl0eShVc2VySWRlbnRpdHkuSURFTlRJVFlfU1RBUik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlc2lkID4gMCkgewogICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLnNldFN0YXJJY29uKG1Db250ZXh0LmdldFJlc291cmNlcygpLmdldERyYXdhYmxlKHJlc2lkKSwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLm5hbWUuc2V0U3Rhckljb24obnVsbCwgZmFsc2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGF0YS5pc1N0YXJQcmFpc2VNb2RlKCkpIHsKICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXRUZXh0Q29sb3IobUNvbnRleHQuZ2V0UmVzb3VyY2VzKCkuZ2V0Q29sb3IoCiAgICAgICAgICAgICAgICAgICAgICAgIFIuY29sb3IucHBfY29sb3JfZmY5NjAwKSwgZmFsc2UpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy88IS0tVjcuNiDKudPD08O7p+rHs8bH+LfWsrvNrMjP1qTA4NDNtcTTw7unIGxhbmdqaWFuQHFpeWkuY29tICBTVEFSVC0tPgogICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhLmdldElkZW50aXR5KCkpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIFVzZXJJZGVudGl0eS5JREVOVElUWV9TVEFSOi8vw/fQx8jP1qTTw7unCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRIb2xkZXIubmFtZS5zZXRUZXh0Q29sb3IobUNvbnRleHQuZ2V0UmVzb3VyY2VzKCkuZ2V0Q29sb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUi5jb2xvci5wcF9jb2xvcl9mZjk2MDApLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIC8vxuTL/MjP1qTTw7unCiAgICAgICAgICAgICAgICAgICAgY2FzZSBVc2VySWRlbnRpdHkuSURFTlRJVFlfT0ZGSUNBTDoKICAgICAgICAgICAgICAgICAgICBjYXNlIFVzZXJJZGVudGl0eS5JREVOVElUWV9BVVRIT1I6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBVc2VySWRlbnRpdHkuSURFTlRJVFlfQk9PS19BVVRIT1I6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBVc2VySWRlbnRpdHkuSURFTlRJVFlfVkVSSUZJTEVEOgogICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50SG9sZGVyLm5hbWUuc2V0VGV4dENvbG9yKG1Db250ZXh0LmdldFJlc291cmNlcygpLmdldENvbG9yKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIuY29sb3IucHBfY29sb3Jfb2JiZTA2KSwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKLy+3x8jP1qTG1c2o08O7pwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5uYW1lLnNldFRleHRDb2xvcihtQ29udGV4dC5nZXRSZXNvdXJjZXMoKS5nZXRDb2xvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLmNvbG9yLnBwX2NvbG9yXzMzMzMzMyksIHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKCgogICAgICAgICAgICBpZihkYXRhLmdldE1lZGlhRW50aXR5KCkgIT0gbnVsbCkgewo=</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">aW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uUjsK</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAgICAgRmVlZEp1bXBIZWxwZXIuanVtcDJQcmV2aWV3UGhvdG9zKG1Db250ZXh0LCAwLCAwLCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhRW50aXRpZXMsIGZhbHNlLCAwLCBWaWV3VXRpbHMuZ2V0U2luZ2xlVmlld0luZm8odmlldyksIG51bGwpOwo=</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">aW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uUjsK</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">aW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uY29tbW9uLnV0aWxzLlVzZXJJbmZvVXRpbHM7Cg==</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">aW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uY29tbW9uLnVpLmhlbHBlci5GZWVkSnVtcEhlbHBlcjsK</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">aW1wb3J0IGNvbS5pcWl5aS5wYW9wYW8uY29tbW9uLmVudGl0eS5DaGFuZ2VkRGF0YU9mQ29tbWVudHM7Cg==</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudENvbnRlbnQuc2V0VGV4dChwaWNMaW5rKTsK</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlci5yZXBsaWVkQ29tbWVudENvbnRlbnQuc2V0T25Ub3VjaExpc3RlbmVyKG5ldyBMaW5rTW92ZW1lbnRNZXRob2RPdmVycmlkZSgpKTsK</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudEhvbGRlcgo=</text>
      </register>
      <register name=":" type="4">
        <text>145</text>
      </register>
    </registers>
    <search>
      <last-dir>0</last-dir>
      <show-last>false</show-last>
    </search>
    <history>
      <history-search />
      <history-cmd>
        <entry>2415</entry>
        <entry>2597</entry>
        <entry>112</entry>
        <entry>221</entry>
        <entry>wq</entry>
        <entry>q</entry>
        <entry>455</entry>
        <entry>396</entry>
        <entry>860</entry>
        <entry>145</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed X</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed W</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed C</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed S</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed Y</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed M</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed OPEN_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed CLOSE_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>shift ctrl pressed 6</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed 2</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed Q</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>shift ctrl pressed 2</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
</application>